/*!
 * hekrui v1.0.0 (http://www.hekr.me/)
 * Copyright 2015-2016 杭州第九区科技有限公司
 */
!function(a,b){if("function"==typeof define&&define.amd)define(["jquery"],b);else if("object"==typeof exports){var c;try{c=require("jquery")}catch(d){}b(c)}else b(a.jQuery)}("undefined"!=typeof window?window:this,function(a){if("undefined"==typeof a)throw new Error("Hekrui 组件引入之前必须引入jQuery");document.body.addEventListener("touchstart",function(){}),function(a){function b(a,b,c,d){return Math.abs(a-b)>=Math.abs(c-d)?a-b>0?"Left":"Right":c-d>0?"Up":"Down"}function c(){m=null,o.last&&(o.el.trigger("longTap"),o={})}function d(){m&&clearTimeout(m),m=null}function e(){j&&clearTimeout(j),k&&clearTimeout(k),l&&clearTimeout(l),m&&clearTimeout(m),j=k=l=m=null,o={}}function f(a){return("touch"==a.pointerType||a.pointerType==a.MSPOINTER_TYPE_TOUCH)&&a.isPrimary}function g(a,b){return a.type=="pointer"+b||a.type.toLowerCase()=="mspointer"+b}for(var h=["altKey","changedTouches","ctrlKey","metaKey","shiftKey","targetTouches","touches"],i=h.length;i--;)-1===a.event.props.indexOf(h[i])&&a.event.props.push(h[i]);var j,k,l,m,n,o={},p=750;a(document).ready(function(){var h,i,q,r,s=0,t=0;"MSGesture"in window&&(n=new MSGesture,n.target=document.body),a(document).bind("MSGestureEnd",function(a){var b=a.velocityX>1?"Right":a.velocityX<-1?"Left":a.velocityY>1?"Down":a.velocityY<-1?"Up":null;b&&(o.el.trigger("swipe"),o.el.trigger("swipe"+b))}).on("touchstart MSPointerDown pointerdown",function(b){(r=g(b,"down"))&&!f(b)||(q=r?b:b.touches[0],b.touches&&1===b.touches.length&&o.x2&&(o.x2=void 0,o.y2=void 0),h=Date.now(),i=h-(o.last||h),o.el=a("tagName"in q.target?q.target:q.target.parentNode),j&&clearTimeout(j),o.x1=q.pageX,o.y1=q.pageY,i>0&&250>=i&&(o.isDoubleTap=!0),o.last=h,m=setTimeout(c,p),n&&r&&n.addPointer(b.pointerId))}).on("touchmove MSPointerMove pointermove",function(a){(r=g(a,"move"))&&!f(a)||(q=r?a:a.touches[0],d(),o.x2=q.pageX,o.y2=q.pageY,s+=Math.abs(o.x1-o.x2),t+=Math.abs(o.y1-o.y2))}).on("touchend MSPointerUp pointerup",function(c){(r=g(c,"up"))&&!f(c)||(d(),o.x2&&Math.abs(o.x1-o.x2)>30||o.y2&&Math.abs(o.y1-o.y2)>30?l=setTimeout(function(){o.el.trigger("swipe"),o.el.trigger("swipe"+b(o.x1,o.x2,o.y1,o.y2)),o={}},0):"last"in o&&(30>s&&30>t?k=setTimeout(function(){var b=a.Event("tap");b.cancelTouch=e,o.el.trigger(b),o.isDoubleTap?(o.el&&o.el.trigger("doubleTap"),o={}):j=setTimeout(function(){j=null,o.el&&o.el.trigger("singleTap"),o={}},250)},0):o={}),s=t=0)}).on("touchcancel MSPointerCancel pointercancel",e),a(window).on("scroll",e)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(b){a.fn[b]=function(a){return this.on(b,a)}})}(a),function(a){"use strict";var b=function(){var b=".hekr-header-title",c=".hekr-header-back",d=a(document),e=a(b),f=a(c),g=window.innerWidth,h=g/375*100,i=h/2,j=114,k=213,l=246,m=6,n=164,o=240,p=(j-m)/h,q=(k-n)/h,r=(l-o)/h;e.css("position","fixed"),d.on("scroll",function(){var a,b,c,g,s=d.scrollTop();return 0===s?(e.css({background:"transparent"}),void f.css("background","rgba(0, 0, 0, .2)")):s>h?(e.css({backgroundColor:"rgba("+m+", "+n+", "+o+", 1.0)"}),void f.css("background","transparent")):(a=parseInt(j-p*s),b=parseInt(k-q*s),c=parseInt(l-r*s),g=s/h,e.css({backgroundColor:"rgba("+a+", "+b+", "+c+", "+g+")"}),void(s>i?f.css("background","transparent"):f.css("background","rgba(0, 0, 0, .2)")))})};a.extend({hekrHeader:b})}(a),function(a){"use strict";function b(b){if(b=b||[],!a.isArray(b))throw new Error("callbacks参数必须是一个数组");for(var c=b.length;c--;)if(!a.isFunction(b[c])&&null!==b[c])throw new Error("callbacks数组中只能包含函数或null");var d=".hekr-nav",e=a(d),f=e.children("a");f.on("tap",function(c){var d=a(this);if(!d.is(".active")){var e=f.index(this);f.filter(".active").removeClass("active"),d.addClass("active"),b[e]&&b[e].call(this)}});var g=a("body"),h=a(document),i=a(window).height(),j=e.outerHeight();h.on("touchstart",function(){a("input, textarea").blur()}),a("input, textarea").on("focus",function(){var a=g.scrollTop(),b=a+i-j;e.css({position:"absolute",top:b+"px"}),h.off(".nav").on("touchmove.nav",function(a){a.preventDefault()})}).on("blur",function(){setTimeout(function(){e.css({position:"fixed",top:""}),h.off(".nav")},300)}).on("touchstart",function(a){a.stopPropagation()})}a.extend({hekrNav:b})}(a),function(a){"use strict";function b(b){var c='<div class="hekr-confirm"><div class="hekr-confirm-position"><div class="hekr-confirm-inner"><div class="hekr-confirm-content"><div class="hekr-confirm-title"></div><div class="hekr-confirm-message"></div></div><div class="hekr-confirm-buttons hekr-confirm-single"><a href="javascript:;" class="hekr-confirm-cancel"></a><a href="javascript:;" class="hekr-confirm-confirm"></a></div></div></div></div>',d='<input type="text"><a href="javascript:;" class="hekr-confirm-x">X</a>',e={title:"",titleColor:"white",message:"",messageColor:"white",buttonType:"double",confirmButton:"确定",confirmButtonColor:"white",cancelButton:"取消",cancelButtonColor:"white",confirmButtonEvent:function(a){},input:!1,context:window},f=a(".hekr-confirm"),g=f.find(".hekr-confirm-title"),h=f.find(".hekr-confirm-message"),i=f.find(".hekr-confirm-buttons"),j=i.find(".hekr-confirm-cancel"),k=i.find(".hekr-confirm-confirm"),l=h.find("input"),m=h.find(".hekr-confirm-x"),n=a("body"),o=function(a){var b="";switch(a){case"red":b="hekr-text-danger";break;case"blue":b="hekr-text-major";break;case"orange":b="hekr-text-assisted";break;case"green":b="hekr-text-minor";break;case"white":b="hekr-text-white";break;default:b="hekr-text-white"}return b};b=b?b:{},a.extend(e,b),f.length||(n.append(c),f=a(".hekr-confirm"),g=f.find(".hekr-confirm-title"),h=f.find(".hekr-confirm-message"),i=f.find(".hekr-confirm-buttons"),j=i.find(".hekr-confirm-cancel"),k=i.find(".hekr-confirm-confirm"),j.on("tap.confirm",function(){f.fadeOut("normal")}),f.on("touchmove.confirm",function(a){a.preventDefault()})),e.title?(g.show(),g.html(e.title).removeClass().addClass("hekr-confirm-title "+o(e.titleColor))):g.hide(),e.input?(h.html(d).removeClass().addClass("hekr-confirm-message hekr-confirm-input"),l=h.find("input"),m=h.find(".hekr-confirm-x"),l.val(""),setTimeout(function(){l.focus()},0),m.off(".confirm").on("tap.confirm",function(a){l.val(""),setTimeout(function(){l.focus()},0)})):h.html(e.message).removeClass().addClass("hekr-confirm-message "+o(e.messageColor)),"single"===e.buttonType?i.removeClass().addClass("hekr-confirm-buttons hekr-confirm-single"):i.removeClass().addClass("hekr-confirm-buttons"),k.html(e.confirmButton).removeClass().addClass("hekr-confirm-confirm "+o(e.confirmButtonColor)),j.html(e.cancelButton).removeClass().addClass("hekr-confirm-cancel "+o(e.cancelButtonColor)),k.off(".confirm").on("tap.confirm",function(a){var b=null;e.input&&(b=l.val()),e.confirmButtonEvent.call(e.context,b),f.fadeOut("normal")}),f.fadeIn("normal")}a.extend({hekrConfirm:b})}(a),function(a,b,c){"use strict";function d(b,c,d,e){"boolean"!==a.type(b)&&(c=arguments[0],d=arguments[1],e=arguments[2],b=!0),d=parseInt(d)||2e3;var f='<div class="hekr-toast"><div class="hekr-toast-position"><div class="hekr-toast-message"></div></div></div>',g=function(a){clearTimeout(i.data("toastTimer")),i.fadeOut("normal")},h=a("body"),i=a(".hekr-toast"),j=i.find(".hekr-toast-message");i.length||(h.append(f),i=h.find(".hekr-toast"),j=i.find(".hekr-toast-message"),i.on("touchmove.toast",function(a){a.preventDefault()})),e?i.off(".toast"):i.off(".toast").on("tap.toast",g),j.html(c),b?(i.fadeIn("normal"),i.data("toastTimer")&&clearTimeout(i.data("toastTimer")),i.data("toastTimer",setTimeout(function(){i.fadeOut("normal")},d))):(i.data("toastTimer")&&clearTimeout(i.data("toastTimer")),i.fadeOut("normal"))}a.extend({hekrToast:d})}(a,window,document),function(a){"use strict";var b=0,c='<div class="hekr-range-slider"></div>',d='<div class="hekr-range-slider-track"><div class="hekr-range-slider-tip"><div class="hekr-range-slider-tip-text">{minValue}</div><div class="hekr-range-slider-tip-trangle"></div></div>{singleRemove}<div class="hekr-range-slider-tip"><div class="hekr-range-slider-tip-text">{maxValue}</div><div class="hekr-range-slider-tip-trangle"></div></div><div class="hekr-range-slider-cover"></div><div class="hekr-range-slider-thumb"></div>{/singleRemove}<div class="hekr-range-slider-thumb"></div></div>',e=function(b,c,d){if(!(this instanceof e))return new e(b,c,d);if("input"!==b.nodeName.toLowerCase()||"range"!==b.type)throw new Error('[hekrRangeSlider] 元素必须是一个input[type="range"]标签');var f={type:"double",min:0,max:100,minValue:0,maxValue:100,value:0,step:1,unit:"",disabled:!1,onStart:null,onChange:null,onFinish:null,onUpdate:null,startContext:b,changeContext:b,finishContext:b,updateContext:b};this.options=a.extend({},f,c),this.ele=b,this.$ele=a(b),this.$doc=a(document),this.$body=a("body"),void 0===d&&(d=(new Date).getTime()),b.id||(b.id="hekrRangeSlider"+d),this._init()};return e.prototype={constructor:e},e.prototype._init=function(){var a=String(this.options.step).indexOf(".");this.stepToFixed=-1===a?0:String(this.options.step).substring(String(this.options.step).indexOf(".")+1).length,this.options.value=parseFloat(this.options.value).toFixed(this.stepToFixed),this.options.minValue=parseFloat(this.options.minValue).toFixed(this.stepToFixed),this.options.maxValue=parseFloat(this.options.maxValue).toFixed(this.stepToFixed),this.oldValue=this.options.value,this.oldMinValue=this.options.minValue,this.oldMaxValue=this.options.maxValue,this.value=this.oldValue,this.minValue=this.oldMinValue,this.maxValue=this.oldMaxValue,this._wrap(),this._position(),this.options.disabled?this.$range.addClass("hekr-range-disabled"):this._bind()},e.prototype._wrap=function(){var a=this.options,b=this.$ele,e=d;if(this.$range&&(this._unbind(),this.$track.remove(),b.unwrap()),"double"===a.type)e=e.replace(/\{singleRemove\}/g,"").replace(/\{\/singleRemove\}/g,"").replace(/\{minValue\}/g,""+a.minValue+a.unit).replace(/\{maxValue\}/g,""+a.maxValue+a.unit);else{for(var f="{singleRemove}",g="{/singleRemove}",h=e.indexOf(f),i=e.indexOf(g);-1!==h;)e=e.substring(0,h)+e.substring(i+g.length),h=e.indexOf(f),i=e.indexOf(g);e=e.replace(/\{minValue\}/g,""+a.value+a.unit)}b.addClass("hekr-range-slider-input").wrap(c);var j=b.parent();j.append(e);var k=j.find(".hekr-range-slider-track"),l=k.find(".hekr-range-slider-tip"),m=k.find(".hekr-range-slider-cover"),n=k.find(".hekr-range-slider-thumb");this.$range=j,this.$track=k,this.$tips=l,this.$cover=m,this.$thumbs=n},e.prototype._position=function(){var a=this.$track.get(0).offsetWidth,b=this.$track.parent().parent(),c=[];if(a)a=this.$track.outerWidth();else{for(var d=0;1/0>d&&("none"===b.css("display")&&(b.css("visibility","hidden").show(),c.push(b)),-1===b.index(this.$body.get(0)));d++)b=b.parent();a=this.$track.outerWidth()}var e=this.options,f=this.$thumbs.outerWidth(),g=a-f,h=(e.max-e.min)/e.step,i=g/h;this.$thumbs.add(this.$tips).css({left:0,right:"auto"});var j=this.$tips.eq(0),k=j.outerWidth(),l=this.$thumbs.eq(0),m="double"===e.type?e.minValue:e.value,n=(m-e.min)*i/e.step,o=n+f/2-k/2;if(l.css("left",n+"px"),j.css("left",o+"px"),this.$firstTip=j,this.$firstThumb=l,"double"===e.type){var p=this.$tips.eq(1),q=p.outerWidth(),r=this.$thumbs.eq(1),s=(e.maxValue-e.min)*i/e.step,t=s+f/2-q/2,u=s-n,v=n+f/2;r.css("left",s+"px"),p.css("left",t+"px"),this.$cover.css({width:u+"px",left:v+"px"});var w=parseInt(j.css("left"),10),x=parseInt(p.css("left"),10),y=!(x-w-k>5);y&&(j.find(".hekr-range-slider-tip-text").text(""+e.minValue+e.unit+" - "+e.maxValue+e.unit),p.hide(),k=j.outerWidth(),o=n+f/2-k/2+(s-n)/2,j.css("left",o+"px"),e.minValue-e.min>e.maxValue-e.max?(l.css("z-index","2"),r.css("z-index","1")):(l.css("z-index","1"),r.css("z-index","2"))),this.$secondTip=p,this.$secondThumb=r}for(var z=c.length;z--;)c[z].css("visibility","").hide();this.partPixel=i},e.prototype._bind=function(){this.$thumbs.off("touchstart.rangeSlider").on("touchstart.rangeSlider",a.proxy(this._start,this))},e.prototype._unbind=function(){this.$thumbs.off("touchstart.rangeSlider")},e.prototype._start=function(b){var c=b.currentTarget,d=a(c),e=this.options;this.thumbIndex=this.$thumbs.index(c);var f=this.thumbIndex?this.$secondTip:this.$firstTip,g=f.clone();if(f.stop(!0,!0),"double"===e.type&&(this.$tips.show().css("z-index","1"),this.$firstTip.find(".hekr-range-slider-tip-text").text(""+this.oldMinValue+e.unit),this.$secondTip.find(".hekr-range-slider-tip-text").text(""+this.oldMaxValue+e.unit),f.css("z-index","2"),this.thumbIndex)){var h=this.$firstTip.outerWidth(),i=parseInt(this.$firstThumb.css("left"),10)+this.$thumbs.outerWidth()/2-h/2;this.$firstTip.css("left",i+"px")}f.addClass("hekr-range-slider-tip-active"),g.addClass("hekr-range-slider-tip-active").css("display","none").find(".hekr-range-slider-tip-text").text(""+this.oldMinValue+e.unit),this.$body.append(g);var j=g.outerWidth(),k=parseInt(d.css("left"))+d.outerWidth()/2-j/2;f.animate({left:k+"px"},300,"linear"),g.remove(),g=null,this.$doc.on("touchmove.rangeSlider",a.proxy(this._move,this)).on("touchend.rangeSlider touchcancel.rangeSlider",a.proxy(this._end,this)),a.isFunction(e.onStart)&&("double"===e.type?e.onStart.call(e.startContext,{minValue:Number(this.oldMinValue),maxValue:Number(this.oldMaxValue)}):e.onStart.call(e.startContext,{value:Number(this.oldValue)}))},e.prototype._move=function(a){a.preventDefault();var b=this.options,c=a.touches[0],d=this.thumbIndex?this.$secondThumb:this.$firstThumb,e=this.thumbIndex?this.$secondTip:this.$firstTip,f=c.pageX-this.$track.offset().left-parseFloat(this.$track.css("borderLeftWidth"))-d.outerWidth()/2,g=this.thumbIndex?parseInt(this.$firstThumb.css("left"),10):0,h="double"!==b.type||this.thumbIndex?this.$track.outerWidth()-this.$thumbs.outerWidth():parseInt(this.$secondThumb.css("left"),10);e.stop(!0,!0),f=g>f?g:f>h?h:f,d.css("left",f+"px");var i=Math.ceil(f/this.partPixel)*b.step+b.min,j=this.thumbIndex?this.oldMinValue:b.min,k=this.thumbIndex?b.max:"double"===b.type?this.oldMaxValue:b.max;i=Number(i),j=Number(j),k=Number(k),i=j>i?j:i>k?k:i,e.find(".hekr-range-slider-tip-text").text(""+i.toFixed(this.stepToFixed)+b.unit),"double"===b.type?this.thumbIndex?this.maxValue=i:this.minValue=i:this.value=i;var l=e.outerWidth(),m=f+d.outerWidth()/2-l/2;if(e.css("left",m+"px"),"double"===b.type){var n=parseInt(this.$firstThumb.css("left"),10),o=parseInt(this.$secondThumb.css("left"),10),p=o-n,q=n+d.outerWidth()/2;this.$cover.css({width:p+"px",left:q+"px"})}},e.prototype._end=function(b){var c=this.options,d=this.thumbIndex?this.$secondTip:this.$firstTip,e=this.thumbIndex?this.$secondThumb:this.$firstThumb;d.removeClass("hekr-range-slider-tip-active"),d.stop(!0,!0);var f=d.clone();f.removeClass("hekr-range-slider-tip-active").css("display","none"),this.$body.append(f);var g=f.outerWidth(),h=parseInt(e.css("left"))+e.outerWidth()/2-g/2;d.animate({left:h+"px"},300,"linear",a.proxy(function(){if("double"===c.type){var a=parseInt(this.$firstTip.css("left"),10),b=parseInt(this.$secondTip.css("left"),10),d=this.$firstTip.outerWidth(),f=!(b-a-d>5);if(f){this.$firstTip.find(".hekr-range-slider-tip-text").text(""+this.minValue+c.unit+" - "+this.maxValue+c.unit),this.$secondTip.fadeOut(300),d=this.$firstTip.outerWidth();var g=parseInt(this.$firstThumb.css("left"),10)+e.outerWidth()/2-d/2+(parseInt(this.$secondThumb.css("left"),10)-parseInt(this.$firstThumb.css("left"),10))/2;this.$firstTip.css("left",g+"px"),this.$thumbs.not(e[0]).css("z-index","1"),e.css("z-index","2")}}},this)),f.remove(),f=null,this.$doc.off(".rangeSlider"),"double"===c.type?(a.isFunction(c.onChange)&&(this.minValue===this.oldMinValue&&this.maxValue===this.oldMaxValue||c.onChange.call(c.changeContext,{minValue:Number(this.minValue),maxValue:Number(this.maxValue)})),a.isFunction(c.onFinish)&&c.onFinish.call(c.finishContext,{minValue:Number(this.minValue),maxValue:Number(this.maxValue)}),this.oldMinValue=this.minValue,this.oldMaxValue=this.maxValue):(a.isFunction(c.onChange)&&this.value!==this.oldValue&&c.onChange.call(c.changeContext,{value:Number(this.value)}),a.isFunction(c.onFinish)&&c.onFinish.call(c.finishContext,{value:Number(this.value)}),this.oldValue=this.value)},e.prototype.getValues=function(){return"double"===this.options.type?{minValue:Number(this.minValue),maxValue:Number(this.maxValue)}:{value:Number(this.value)}},e.prototype.disable=function(){this.$range.is(".hekr-range-disabled")||this.$range.addClass("hekr-range-disabled"),this.options.disabled=!0,this._unbind()},e.prototype.enable=function(){this.$range.is(".hekr-range-disabled")&&this.$range.removeClass("hekr-range-disabled"),this.options.disabled=!1,this._bind()},e.prototype.update=function(b){a.extend(this.options,b),this._init(),a.isFunction(this.options.onUpdate)&&this.options.onUpdate.call(this.options.updateContext,"double"===this.options.type?{minValue:Number(this.minValue),maxValue:Number(this.maxValue)}:{value:Number(this.value)})},a.fn.hekrRangeSlider=function(c){return this.each(function(){a.data(this,"hekrRangeSlider")||a.data(this,"hekrRangeSlider",new e(this,c,b++))})},a.hekrRangeSlider=e}(a),function(a,b,c){"use strict";var d="hekr-switches-checkbox",e="hekr-switches-disabled",f='<div class="hekr-switches {disabled}"></div>',g='<label class="hekr-switches-label" for="{id}"><div class="hekr-switches-scoller"><div class="hekr-switches-on"></div><div class="hekr-switches-off"></div></div><div class="hekr-switches-shadow"></div><div class="hekr-switches-slider"></div></label>',h=0,i=function(b,d,e){if(!(this instanceof i))return new i(b,d,e);if("input"!==b.tagName.toLowerCase()||"checkbox"!==b.type.toLowerCase())throw new Error('[hekrSwitches] 元素必须是一个input[type="checkbox"]标签');this.ele=b,this.$ele=a(b),this.$body=a("body"),this.$doc=a(c);var f={checked:!1,disabled:!1,value:"",onStart:null,onChange:null,onFinish:null,onUpdate:null,startContext:b,changeContext:b,finishContext:b,updateContext:b},g=this._getAttr();this.options=a.extend({},f,g,d),void 0===e&&(e=(new Date).getTime()),b.id||(b.id="hekrSwitches"+e),this._init()};return i.prototype={constructor:i},i.prototype._init=function(){this.oldChecked=this.options.checked,this.checked=this.oldChecked,this.disabled=this.options.disabled,this.value=this.options.value,this._wrap(),this.options.disabled?this._unbind():this._bind()},i.prototype._getAttr=function(){var a=this.ele;return{checked:Boolean(a.checked),disabled:Boolean(a.disabled),value:a.value}},i.prototype._wrap=function(){var a=this.$ele,b=this.ele,c=this.options,h=f,i=g;this.$switches&&(this._unbind(),this.$label.remove(),a.unwrap()),h=c.disabled?h.replace("{disabled}",e):h.replace("{disabled}",""),a.wrap(h),a.addClass(d).attr({checked:c.checked,disabled:c.disabled,value:c.value});var j=a.parent();i=i.replace("{id}",b.id),j.append(i),this.$switches=j,this.$label=j.find(".hekr-switches-label"),this.$scroller=this.$label.find(".hekr-switches-scoller"),this.$on=this.$scroller.find(".hekr-switches-on"),this.$off=this.$scroller.find(".hekr-switches-off"),this.$shadow=this.$label.find(".hekr-switches-shadow"),this.$slider=this.$label.find(".hekr-switches-slider");var k=(this.$label.height()-this.$slider.outerHeight())/2,l=this.$label.width()-k-this.$slider.outerWidth(),m=c.checked?l:k;this.$slider.css({top:k+"px",left:m+"px"});var n=c.checked?0:"-100%";this.$scroller.css("left",n),this.sliderToLeft=k,this.sliderToRight=l},i.prototype._bind=function(){this.$switches.off(".switches").on("touchstart.switches",a.proxy(this._start,this))},i.prototype._unbind=function(){this.$switches.off(".switches")},i.prototype._start=function(b){var c=this.options,d=b.target,e=(a(d),b.touches[0]),f=this.$slider,g=this.$label;this.startTouches={pageX:e.pageX,pageY:e.pageY,timeStamp:b.timeStamp},this.sliderStartLeft=parseFloat(f.css("left")),this.sliderMinLeft=this.sliderToLeft,this.sliderMaxLeft=g.width()-f.width()-this.sliderToLeft,this.sliderAvailable=this.sliderMaxLeft-this.sliderToLeft,this.scrollerAvailable=this.$scroller.width()/2,this.$doc.on("touchmove.switches",a.proxy(this._move,this)).on("touchend.switches touchcancel.switches",a.proxy(this._end,this)),a.isFunction(c.onStart)&&c.onStart.call(c.startContext,{checked:Boolean(this.oldChecked),disabled:Boolean(this.disabled),value:this.value},this.ele)},i.prototype._move=function(a){a.preventDefault();var b=a.touches[0],c=this.startTouches,d=(this.$label,this.$slider),e=this.$scroller;this.moveTouches={pageX:b.pageX,pageY:b.pageY,timeStamp:a.timeStamp};var f=this.sliderStartLeft+b.pageX-c.pageX;f=f<this.sliderMinLeft?this.sliderMinLeft:f>this.sliderMaxLeft?this.sliderMaxLeft:f,d.css("left",f+"px");var g=(f-this.sliderToLeft)*this.scrollerAvailable/this.sliderAvailable-this.scrollerAvailable;e.css("left",g+"px")},i.prototype._end=function(b){var c=this.options,d=this.$slider,e=this.$scroller,f=this.startTouches,g=this.moveTouches;if(!g||g.timeStamp-f.timeStamp<300&&Math.pow(g.pageX-f.pageX,2)+Math.pow(g.pageY-f.pageY,2)<Math.pow(16))this.oldChecked?(d.animate({left:this.sliderToLeft+"px"},150),e.animate({left:-this.$on.outerWidth()+"px"},150)):(d.animate({left:this.sliderToRight+"px"},150),e.animate({left:0},150)),this.checked=!this.oldChecked;else{var h=parseInt(d.css("left")),i=(h-this.sliderToLeft)/this.sliderAvailable>.5;i?(d.animate({left:this.sliderToRight+"px"},100),e.animate({left:0},100)):(d.animate({left:this.sliderToLeft+"px"},100),e.animate({left:-this.$on.outerWidth()+"px"},100)),this.checked=i}this.oldChecked!==this.checked&&(a.isFunction(c.onChange)&&c.onChange.call(c.changeContext,{checked:Boolean(this.checked),disabled:Boolean(this.disabled),value:this.value},this.ele),this.oldChecked=this.checked,this.$ele.attr("checked",this.checked)),a.isFunction(c.onFinish)&&c.onFinish.call(c.finishContext,{checked:Boolean(this.checked),disabled:Boolean(this.disabled),value:this.value},this.ele),this.startTouches=null,this.moveTouches=null,this.$doc.off(".switches")},i.prototype.getValues=function(){return{checked:Boolean(this.checked),disabled:Boolean(this.disabled),value:this.value}},i.prototype.update=function(b){var c=this._getAttr();a.extend(this.options,c,b),this._init(),a.isFunction(this.options.onUpdate)&&this.options.onUpdate.call(this.options.updateContext,{checked:Boolean(this.options.checked),disabled:Boolean(this.options.disabled),value:this.options.value},this.ele)},i.prototype.disable=function(){this._unbind(),this.$switches.addClass("hekr-switches-disabled"),this.$ele.attr("disabled",!0),this.disabled=!0},i.prototype.enable=function(){this._bind(),this.$switches.removeClass("hekr-switches-disabled"),this.$ele.attr("disabled",!1),this.disabled=!1},a.fn.hekrSwitches=function(b){return this.each(function(){a.data(this,"hekrSwitches")||a.data(this,"hekrSwitches",new i(this,b,h++))})},a.hekrSwitches=i}(a,window,document),function(a,b,c){"use strict";var d=0,e='<div class="hekr-slot-selector"><div class="hekr-slot-selector-scroller {disabled}">{circles}{rects}{slider}</div><div class="hekr-slot-selector-labels">{labels}</div></div>',f='<div class="hekr-slot-selector-circle"><input type="radio" id="{id}" name="{name}" value="{value}" {checked}></div>',g='<div class="hekr-slot-selector-rect"></div>',h='<div class="hekr-slot-selector-slider {init}">{icon}</div>',i='<div class="hekr-slot-selector-label">{label}</div>',j=function(b,d,e){if(!(this instanceof j))return new j(b,d,e);var f=a(b);f.css({appearance:"none",display:"block"});var g={ratios:[1],radios:{number:2,name:"radio",ids:["radio1","radio2"],values:[1,2]},labels:["项目一","项目二"],slider:{init:!0,icon:"&bull;",size:"0.24rem"},value:1,disabled:!1,onStart:null,onChange:null,onFinish:null,onUpdate:null,startContext:b,changeContext:b,finishContext:b,updateContext:b};this.options=a.extend({},g,d),this.ele=b,this.$ele=f,this.$doc=a(c),this.$body=a("body"),this.identifier=void 0===e?(new Date).getTime():e,this._init()};return j.prototype={constructor:j},j.prototype._init=function(){this.oldValue=this.options.value,this.value=this.oldValue,this.disabled=this.options.disabled,this._wrap(),this.disabled?this._unbind():this._bind()},j.prototype._wrap=function(){for(var b,c,d=this.options,j=this.$ele,k=(this.identifier,""),l="",m="",n="",o=d.radios.name,p=d.radios.ids,q=d.ratios,r=q.length,s=d.labels,t=d.slider,u=d.radios.values,v=0,w=d.radios.number,x=a.inArray(d.value,u);w>v;v++)b=x===v?f.replace("{checked}","checked"):f.replace("{checked}",""),k+=b.replace("{name}",o).replace("{id}",p[v]).replace("{value}",u[v]),n+=i.replace("{label}",s[v]);for(v=0;r>v;v++)l+=g;m=h.replace("{icon}",t.icon),m=t.init?m.replace("{init}","hekr-slot-selector-slider-init"):m.replace("{init}",""),c=e.replace("{circles}",k).replace("{rects}",l).replace("{slider}",m).replace("{labels}",n),c=d.disabled?c.replace("{disabled}","hekr-slot-selector-disabled"):c.replace("{disabled}",""),j.html(c);var y=this.$selector=j.find(".hekr-slot-selector"),z=this.$scroller=y.find(".hekr-slot-selector-scroller"),A=this.$circles=z.find(".hekr-slot-selector-circle"),B=(this.$radios=A.find('input[type="radio"]'),this.$rects=z.find(".hekr-slot-selector-rect")),C=this.$slider=z.find(".hekr-slot-selector-slider"),D=this.$labels=y.find(".hekr-slot-selector-label"),E=y.get(0).offsetWidth,F=y.parent().parent(),G=[];if(E)E=y.outerWidth();else{for(var H=0;1/0>H&&("none"===F.css("display")&&(F.css("visibility","hidden").show(),G.push(F)),-1===F.index(this.$body.get(0)));H++)F=F.parent();E=y.outerWidth()}for(var I=G.length;I--;)G[I].css("visibility","").hide();var J,K,L,M,N=C.outerWidth(),O=A.outerWidth(),P=function(a,b){for(var c=0;b--;)c+=a[b];return c}(q,r),Q=E-O*w,R=[],S=[],T=[],U=[];for("number"==typeof d.slider.size?(N=d.slider.size,C.css({width:N+"px",height:N+"px"})):"string"==typeof d.slider.size&&(C.css({width:d.slider.size,height:d.slider.size}),N=C.outerWidth()),C.css("line-height",N+"px"),D.parent().height(D.parent().outerHeight()+(N-O)/2),y.css("padding-top",(N-O)/2+"px"),v=0;r>v;v++){if(J=q[v]/P*Q+2,S[v]=J,S[v-1]){for(var V=0,W=0;v>W;W++)V+=S[W];K=V+O*(v+1)-2*(v+1)+1,L=V+O*v-2*v}else K=O-1,L=0;T[v]=K,B.eq(v).css({width:J+"px",left:K+"px"}),R[v]=L-(N-O)/2,A.eq(v).css("left",L+"px"),M=L-(D.eq(v).width()-O)/2,D.eq(v).css({left:M+"px",top:(N-O)/2+"px"}),U[v]=void 0!==R[v-1]?R[v-1]+(L-R[v-1])/2+N/2:-(N-O)/2}L=L+S[v-1]+O-2,R[v]=L-(N-O)/2,A.eq(v).css("left",L+"px"),M=L-(D.eq(v).width()-O)/2,D.eq(v).css({left:M+"px",top:(N-O)/2+"px"}),U[v]=R[v-1]+(L-R[v-1])/2+N/2,U[v+1]=E+(N-O)/2,t.init&&(C.css("left",R[x]+"px"),C.css("top",-(N-O)/2+"px")),this.sliderSize=N,this.circlesSize=O,this.sliderRange=U,this.circlesLeft=R},j.prototype._bind=function(){this.$scroller.off(".slotSelector").on("touchstart.slotSelector",a.proxy(this._start,this))},j.prototype._unbind=function(){this.$scroller.off(".slotSelector")},j.prototype._start=function(b){var c=this.options,d=this.$scroller,e=this.$slider,f=this.sliderSize,g=this.startTouches=b.touches[0],h=-(this.sliderSize-this.circlesSize)/2,i=d.width()-f+(this.sliderSize-this.circlesSize)/2,j=d.offset().left,k=g.pageX-j-f/2;this.scrollerPosLeft=j,this.min=h,this.max=i,e.is(":visible")?e.is(".hekr-slot-selector-slider")?this.canMove=!0:this.canMove=!1:(k=h>k?h:k>i?i:k,e.addClass("hekr-slot-selector-slider-init").css("left",k+"px"),this.canMove=!0),this.$doc.on("touchmove.slotSelector",a.proxy(this._move,this)).on("touchend.slotSelector touchcancel.slotSelector",a.proxy(this._end,this)),a.isFunction(c.onStart)&&c.onStart.call(c.startContext,{disabled:Boolean(this.disabled),value:this.value})},j.prototype._move=function(a){a.preventDefault();var b=a.touches[0];if(this.canMove){var c=(this.options,this.$scroller,this.$slider),d=this.sliderSize,e=this.min,f=this.max,g=b.pageX-this.scrollerPosLeft-d/2;g=e>g?e:g>f?f:g,c.css("left",g+"px")}this.moveTouches=b},j.prototype._end=function(b){var c=this.options,d=this.$slider,e=this.$radios,f=this.moveTouches?this.moveTouches.pageX:this.startTouches.pageX,g=this.min,h=this.max,i=f-this.scrollerPosLeft-this.sliderSize/2,j=this.sliderRange,k=j.length,l=0;for(i=g>i?g:i>h?h:i;k--;)if(i+this.sliderSize/2<=j[k]&&i+this.sliderSize/2>=j[k-1]){l=k-1;break}d.animate({left:this.circlesLeft[l]+"px"},150),this.value=c.radios.values[l],this.value!==this.oldValue&&(e.removeAttr("checked"),e.eq(l).attr("checked","checked"),a.isFunction(c.onChange)&&c.onChange.call(c.changeContext,{disabled:Boolean(this.disabled),value:this.value}),this.oldValue=this.value),a.isFunction(c.onFinish)&&c.onFinish.call(c.finishContext,{disabled:Boolean(this.disabled),value:this.value}),this.canMove=!1,this.startTouches=null,this.moveTouches=null,this.$doc.off(".slotSelector")},j.prototype.disable=function(){this.disabled=!0,this.options.disabled=!0,this.$scroller.addClass("hekr-slot-selector-disabled"),this._unbind()},j.prototype.enable=function(){this.disabled=!1,this.options.disabled=!1,this.$scroller.removeClass("hekr-slot-selector-disabled"),this._bind()},j.prototype.getValues=function(){return{disabled:Boolean(this.disabled),value:this.value}},j.prototype.update=function(b){a.extend(this.options,b),this._init(),a.isFunction(this.options.onUpdate)&&this.options.onUpdate.call(this.options.updateContext,{disabled:Boolean(this.disabled),value:this.value})},a.fn.hekrSlotSelector=function(b){return this.each(function(){a.data(this,"hekrSlotSelector")||a.data(this,"hekrSlotSelector",new j(this,b,d++))})},a.hekrSlotSelector=j}(a,window,document),function(a,b,c,d){"use strict";var e=10,f='<div class="hekr-picker{disabled}"><ul class="hekr-picker-list">{items}</ul><div class="hekr-picker-mask">{maskInnerHTML}</div></div>',g=navigator.platform.toLowerCase(),h=navigator.userAgent.toLowerCase(),i=(h.indexOf("iphone")>-1||h.indexOf("ipad")>-1||h.indexOf("ipod")>-1)&&(g.indexOf("iphone")>-1||g.indexOf("ipad")>-1||g.indexOf("ipod")>-1),j=function(b,d){if(!(this instanceof j))return new j(b,d);b.style.display="block",this.ele=b,this.$ele=a(b),this.$body=a("body"),this.$doc=a(c);var e={disabled:!1,options:[0,1,2,3,4,5,6,7,8,9],maps:[0,1,2,3,4,5,6,7,8,9],min:null,max:null,step:null,value:null,angle:20,maskInnerHTML:"",onStart:null,onChange:null,onFinish:null,onUpdate:null,startContext:b,changeContext:b,finishContext:b,updateContext:b};this.options=a.extend(!0,{},e,d),this.canScroll=!0,this._init()};return j.prototype._init=function(){this.fixed=this._decimalPlace(this.options.step),this.height=this.$ele.height(),this.radius=this.height/2-e,this._calcOptions(),this._append(),this.disabled?this._unbind():this._bind()},j.prototype._decimalPlace=function(a){if(!a)return 0;var b=String(a).indexOf("."),c=String(a).length;return-1===b?0:c-b-1},j.prototype._calcOptions=function(){var b=this.options,c=b.min,d=b.max,e=b.step,f="number"==typeof c&&"number"==typeof d&&"number"==typeof e&&d>c;if(f){var g,h=Math.ceil((d-c)/e+1);for(b.options=[];h--;)g=c+h*e,g=g>d?d:g,b.options[h]=parseFloat(g).toFixed(this.fixed);b.maps=b.options}else a.isArray(b.options)&&a.isArray(b.maps)&&b.options&&b.maps||(b.options=[0,1,2,3,4,5,6,7,8,9],b.maps=b.options);"number"==typeof b.value&&(b.value=Number(parseFloat(b.value).toFixed(this.fixed)));var i=a.inArray(b.value,b.options);(0>i||"undefined"==typeof b.maps[i])&&(b.value=f?Number(parseFloat(c).toFixed(this.fixed)):b.options[0]),this.disabled=!!b.disabled,this.value=b.value,this.oldValue=this.value},j.prototype._append=function(){for(var b=this.options,c=this.disabled,d=b.value,e=b.options,g=b.maps,h=b.angle,j=this.radius,k=this.$ele,l=a.inArray(d,e),m=g.length,n="",o=0,p=0;m>p;p++)o=-h*p,n+=l===p?'<li class="hekr-picker-active" style="-webkit-transform-origin: center center -'+j+"px;transform-origin: center center -"+j+"px;-webkit-transform: translateZ("+j+"px) rotateX("+o+"deg);transform: translateZ("+j+"px) rotateX("+o+'deg);">'+g[p]+"</li>":'<li style="-webkit-transform-origin: center center -'+j+"px;transform-origin: center center -"+j+"px;-webkit-transform: translateZ("+j+"px) rotateX("+o+"deg);transform: translateZ("+j+"px) rotateX("+o+'deg);">'+g[p]+"</li>";var q=c?f.replace("{disabled}"," hekr-picker-disabled"):f.replace("{disabled}","");q=q.replace("{items}",n),
q=b.maskInnerHTML?q.replace("{maskInnerHTML}",b.maskInnerHTML):q.replace("{maskInnerHTML}",""),k.html(q);var r=this.$picker=k.find(".hekr-picker"),s=this.$list=r.find(".hekr-picker-list");this.$items=s.find("li"),this.$mask=r.find(".hekr-picker-mask");r.height(this.height);var t=h*l;i&&(this.$list.get(0).style.webkitTransformOrigin="center center "+j+"px",this.$list.get(0).style.transformOrigin="center center "+j+"px"),this._setAngle(t),this.startAngle=t,this.minAngle=0,this.maxAngle=h*(m-1),this.minScrollAngle=this.minAngle-h,this.maxScrollAngle=this.maxAngle+h},j.prototype._bind=function(){this.$picker.off(".picker").on("touchstart.picker",a.proxy(this._start,this)).on("touchmove.picker",a.proxy(this._move,this)).on("touchend.picker touchcancel",a.proxy(this._end,this))},j.prototype._unbind=function(){this.$picker.off(".picker")},j.prototype._start=function(b){if(this.canScroll){var c=this.options;this.startPageY=b.changedTouches[0].pageY,this.beginTime=b.timeStamp,this.beginPageY=this.startPageY,this.$list.get(0).style.webkitTransition="",a.isFunction(c.onStart)&&c.onStart.call(c.startContext,{disabled:Boolean(this.disabled),value:this.value})}},j.prototype._move=function(a){if(a.preventDefault(),this.canScroll){var b=(this.$list,this.$items,this.options.angle,this.startPageY),c=a.changedTouches[0].pageY,d=this._arcLenToDeg(c-b),e=this.startAngle-d,f=this.minScrollAngle,g=this.maxScrollAngle;e=e>g?g:f>e?f:e,this._setAngle(e),this.endTime=a.timeStamp,this.endAngle=e,this.endPageY=c}},j.prototype._end=function(a){this.canScroll&&(this.endAngle===d&&(this.endAngle=this.startAngle),this._scroll(a))},j.prototype._arcLenToDeg=function(a){return 180*a/Math.PI/this.radius},j.prototype._visibility=function(b){var c=parseInt((b/this.options.angle).toFixed(0));this.$items.each(function(b){var d=a(this),e=Math.abs(b-c);e>3?(d.removeClass("hekr-picker-active"),d.removeClass("hekr-picker-visible")):3>=e&&0!==e?(d.removeClass("hekr-picker-active"),d.addClass("hekr-picker-visible")):0===e&&(d.addClass("hekr-picker-active"),d.addClass("hekr-picker-visible"))})},j.prototype._setAngle=function(a){this._visibility(a),this.$list.get(0).style.webkitTransform="perspective(10rem) rotateY(0deg) rotateX("+a+"deg)",this.$list.get(0).style.transform="perspective(10rem) rotateY(0deg) rotateX("+a+"deg)"},j.prototype._endScroll=function(){var b=this.options;if(this.endAngle>this.maxAngle)this.$list.get(0).style.webkitTransition="150ms ease-out",this._setAngle(this.maxAngle),this.startAngle=this.maxAngle,this.value=b.options[b.options.length-1];else if(this.endAngle<this.minAngle)this.$list.get(0).style.webkitTransition="150ms ease-out",this._setAngle(this.minAngle),this.startAngle=this.minAngle,this.value=b.options[0];else{var c=parseInt((this.endAngle/this.options.angle).toFixed(0));this.$list.get(0).style.webkitTransition="100ms ease-out",this.startAngle=this.options.angle*c,this._setAngle(this.startAngle),this.value=b.options[c]}this.value!==this.oldValue&&(a.isFunction(b.onChange)&&b.onChange.call(b.changeContext,{disabled:Boolean(this.disabled),value:this.value}),this.oldValue=this.value),a.isFunction(b.onFinish)&&b.onFinish.call(b.finishContext,{disabled:Boolean(this.disabled),value:this.value})},j.prototype._rad2deg=function(a){return a/(Math.PI/180)},j.prototype._calcAngle=function(a){var b=parseFloat(this.radius),c=b;a=Math.abs(a);var d=180*parseInt(a/this.radius*2);a%=2*this.radius;var e=(b*b+c*c-a*a)/(2*b*c),f=d+this._rad2deg(Math.acos(e));return f},j.prototype._quartEaseOut=function(a,b,c,d){return-c*((a=a/d-1)*a*a*a-1)+b},j.prototype._scroll=function(a){var b=this.beginPageY,c=this.beginTime,d=this.endPageY||a.changedTouches[0].pageY,e=this.endTime||a.timeStamp,f=(d-b)/(e-c)/3,g=f>0?-1:1,h=6e-4*g*-1,i=Math.abs(f/h),j=f*i/2,k=this.endAngle,l=this._calcAngle(j)*g,m=l;if(k+l<this.minScrollAngle?(l=this.minScrollAngle-k,i=i*(l/m)*.6):k+l>this.maxScrollAngle&&(l=this.maxScrollAngle-k,i=i*(l/m)*.6),0===l)return void this._endScroll();var n=this;!function(a,b,c,d){var e=13,f=d/e,g=0;n.canScroll=!1,function h(){var a=n._quartEaseOut(g,b,c,f);return n._setAngle(a),n.endAngle=a,g++,g>f-1||a<n.minScrollAngle||a>n.maxScrollAngle?(n._endScroll(),void(n.canScroll=!0)):void setTimeout(h,e)}()}(e,k,l,i)},j.prototype.getValues=function(){return{disabled:Boolean(this.disabled),value:this.value}},j.prototype.disable=function(){this.disabled=!0,this.options.disabled=!0,this.$picker.addClass("hekr-picker-disabled"),this._unbind()},j.prototype.enable=function(){this.disabled=!1,this.options.disabled=!1,this.$picker.removeClass("hekr-picker-disabled"),this._bind()},j.prototype.update=function(b){this.options=a.extend(!0,{},this.options,b),this._init(),a.isFunction(this.options.onUpdate)&&this.options.onUpdate.call(this.options.updateContext,{disabled:Boolean(this.disabled),value:this.value})},a.fn.hekrPicker=function(b){return this.each(function(){a.data(this,"hekrPicker")||a.data(this,"hekrPicker",new j(this,b))})},a.hekrPicker=j}(a,window,document),function(a,b,c,d){"use strict";var e='<div class="hekr-time-picker"><div class="hekr-time-picker-mask">:</div><div class="hekr-time-picker-hours"></div><div class="hekr-time-picker-minutes"></div></div>',f=function(b,c){if(!(this instanceof f))return new f(b,c);this.ele=b,this.$ele=a(b);var d={disabled:!1,hours:0,minutes:0,onStart:null,onChange:null,onFinish:null,onUpdate:null,startContext:b,changeContext:b,finishContext:b,updateContext:b};this.options=a.extend(!0,{},d,c),this.angle=38,this._init()};return f.prototype._init=function(){this._append(),this.disabled?(this._unbind(),this.$mask.addClass("hekr-time-picker-disabled")):(this._bind(),this.$mask.removeClass("hekr-time-picker-disabled"))},f.prototype._append=function(){var a=this.options,b=!!a.disabled,c=parseInt(parseFloat(a.hours).toFixed(0)),d=parseInt(parseFloat(a.minutes).toFixed(0)),f=this.$ele;this.disabled=b,this.hours=this.oldHours=c,this.minutes=this.oldMinutes=d,f.html(e);for(var g,h=this.$timePicker=f.find(".hekr-time-picker"),i=this.$hours=h.find(".hekr-time-picker-hours"),j=this.$minutes=h.find(".hekr-time-picker-minutes"),k=(this.$mask=h.find(".hekr-time-picker-mask"),[]),l=[],m=[],n=[],o=0;24>o;o++)g=o,k[o]=g,l[o]=String(g).length<2?"0"+g:g.toString();for(o=0;60>o;o++)g=o,m[o]=g,n[o]=String(g).length<2?"0"+g:g.toString();i.hekrPicker({disabled:b,options:k,maps:l,value:c,angle:this.angle,onFinish:this._finish,finishContext:this}),j.hekrPicker({disabled:b,options:m,maps:n,value:d,angle:this.angle,onFinish:this._finish,finishContext:this}),this.hoursInstance=i.data("hekrPicker"),this.minutesInstance=j.data("hekrPicker")},f.prototype._bind=function(){this.$timePicker.off(".timePicker").on("touchstart.timePicker",a.proxy(this._start,this))},f.prototype._unbind=function(){this.$timePicker.off(".timePicker")},f.prototype._start=function(b){var c=this.options;a.isFunction(c.onStart)&&c.onStart.call(c.startContext,{disabled:Boolean(this.disabled),hours:this.hours,minutes:this.minutes})},f.prototype._finish=function(b){var c=this.options;this.hours=parseInt(this.hoursInstance.getValues().value),this.minutes=parseInt(this.minutesInstance.getValues().value),this.hours===this.oldHours&&this.minutes===this.oldMinutes||(a.isFunction(c.onChange)&&c.onChange.call(c.changeContext,{disabled:Boolean(this.disabled),hours:this.hours,minutes:this.minutes}),this.oldHours=this.hours,this.oldMinutes=this.minutes),a.isFunction(c.onFinish)&&c.onFinish.call(c.finishContext,{disabled:Boolean(this.disabled),hours:this.hours,minutes:this.minutes})},f.prototype.disable=function(){this.disabled=!0,this.options.disabled=!0,this._unbind(),this.$mask.addClass("hekr-time-picker-disabled"),this.hoursInstance.disable(),this.minutesInstance.disable()},f.prototype.enable=function(){this.disabled=!1,this.options.disabled=!1,this._bind(),this.$mask.removeClass("hekr-time-picker-disabled"),this.hoursInstance.enable(),this.minutesInstance.enable()},f.prototype.getValues=function(){return{disabled:Boolean(this.disabled),hours:this.hours,minutes:this.minutes}},f.prototype.update=function(b){a.extend(!0,this.options,b),this._init(),a.isFunction(this.options.onUpdate)&&this.options.onUpdate.call(this.options.updateContext,{disabled:Boolean(this.disabled),hours:this.hours,minutes:this.minutes})},a.fn.hekrTimePicker=function(b){return this.each(function(){a.data(this,"hekrTimePicker")||a.data(this,"hekrTimePicker",new f(this,b))})},a.hekrTimePicker=f}(a,window,document),function(a,b,c,d){"use strict";var e=function(b,c){if(!(this instanceof e))return new e(b,c);this.ele=b,this.$ele=a(b);var d={disabled:!1,selected:1};this.options=a.extend({},d,c),this._init()};return e.prototype._init=function(){var b=this.options,c=this.disabled=!!b.disabled,d=this.selected=parseInt(b.selected)?parseInt(b.selected):1,e=d-1,f=this.$tab=this.$ele,g=(this.$btnGs=f.find(".hekr-btn-group"),this.$btns=f.find(".hekr-btn")),h=(this.$trangles=f.find(".hekr-tab-trangle"),this.$contents=f.find(".hekr-tab-content")),i=f.width();h.each(function(){var b=a(this);b.outerWidth(i);var c=h.index(this)*i/h.length;b.css("marginLeft",-c+"px")}),c?(this._unbind(),g.addClass("hekr-btn-disabled")):(g.removeClass("hekr-btn-disabled"),this._bind()),this._setPos(e)},e.prototype._bind=function(){this.$btns.off(".tab").on("tap.tab",a.proxy(function(a){var b=a.currentTarget,c=this.$btns.index(b);this._setPos(c)},this))},e.prototype._unbind=function(){this.$btns.off(".tab")},e.prototype.getSelected=function(){return parseInt(this.selected)},e.prototype.setSelected=function(a){this.selected=parseInt(a)?parseInt(a):1,this._setPos(this.selected-1)},e.prototype.isDisabled=function(){return this.disabled},e.prototype.disable=function(){this.disabled=!0,this._unbind(),this.$btns.addClass("hekr-btn-disabled"),this.$btns.removeClass("hekr-btn-on")},e.prototype.enable=function(){this.disabled=!1,this._bind(),this.$btns.removeClass("hekr-btn-disabled"),this._setPos(this.selected-1)},e.prototype._setPos=function(a){var b=this.$btns,c=this.$trangles,d=this.$contents;a=Math.abs(a),a>d.length&&(a=d.length-1),this.disabled||(b.removeClass("hekr-btn-on"),b.eq(a).addClass("hekr-btn-on")),c.css("display","none"),c.eq(a).css("display","block"),d.css("display","none"),d.eq(a).css("display","block"),this.selected=a+1},a.fn.hekrTab=function(b){return this.each(function(){a.data(this,"hekrTab")||a.data(this,"hekrTab",new e(this,b))})},a.hekrTab=e}(a,window,document),function(a,b,c,d){"use strict";var e=function(b,c){function d(b){b.preventDefault();var c=b.data._;c.options.autoplay&&c.untimming(),a.each(b.changedTouches,function(a,b){h[b.identifier]={clientX:b.clientX}})}function e(b){b.preventDefault();var c=b.data._,d=b.data.c;a.each(b.changedTouches,function(a,b){var e=d[b.identifier].clientX;d.moveX=b.clientX-e,c.$scroller.css({marginLeft:c.scrollerLeft+d.moveX+"px"})})}function f(b){b.preventDefault();var c=b.data._,d=b.data.c;a.each(b.changedTouches,function(a,b){var e=d[b.identifier].clientX,f=0;d.moveX=b.clientX-e,Math.abs(d.moveX)>=c.options.minMoveX?d.moveX<0?c.currentIndex+1>=c.itemTotal?c.$scroller.animate({marginLeft:c.scrollerLeft+"px"},200):(f=c.$items.eq(c.currentIndex++).outerWidth(),c.$scroller.animate({marginLeft:(c.scrollerLeft-=f)+"px"},100),c.$navItems.filter(".hekr-slide-nav-item-active").removeClass("hekr-slide-nav-item-active"),c.$navItems.eq(c.currentIndex).addClass("hekr-slide-nav-item-active")):d.moveX>0&&(c.currentIndex<=0?c.$scroller.animate({marginLeft:c.scrollerLeft+"px"},200):(f=c.$items.eq(c.currentIndex--).outerWidth(),c.$scroller.animate({marginLeft:(c.scrollerLeft+=f)+"px"},100),c.$navItems.filter(".hekr-slide-nav-item-active").removeClass("hekr-slide-nav-item-active"),c.$navItems.eq(c.currentIndex).addClass("hekr-slide-nav-item-active"))):c.$scroller.animate({marginLeft:c.scrollerLeft+"px"},100);try{delete d[b.identifier]}catch(g){d[b.identifier]=null}d.moveX=0}),c.options.autoplay&&c.timming(c.play)}function g(a){var b=a.data._;b.$scroller.css({marginLeft:b.scrollerLeft+"px"})}var h={moveX:0};if(c=c||{},this.options=a.extend({autoplay:!0,delay:5e3,speed:500,isTouch:!0,minMoveX:50},c),this.$this=a(b),this.$viewport=this.$this.find(".hekr-slide-viewport"),this.$scroller=this.$viewport.find(".hekr-slide-scroller"),this.$items=this.$scroller.find(".hekr-slide-item").filter(":visible"),this.$nav=this.$this.find(".hekr-slide-nav"),this.$navItems=this.$nav.find(".hekr-slide-nav-item").filter(":visible"),this.$firstNavItem=this.$navItems.first(),this.currentIndex=this.$navItems.index(a(".hekr-slide-nav-item-active")),this.itemTotal=this.$items.length,this.$scroller.css("width",100*this.itemTotal+"%"),this.$items.css("width",100/this.itemTotal+"%"),this.scrollerLeft=0,this.timer=null,this.$scroller.css({marginLeft:this.scrollerLeft+"px"}),-1===this.currentIndex)this.currentIndex=0,this.$navItems.eq(this.currentIndex).addClass("hekr-slide-nav-item-active");else if(this.currentIndex>0){var i=this.$items.eq(this.currentIndex).position().left;this.scrollerLeft=-i,this.$scroller.css({marginLeft:this.scrollerLeft+"px"})}this.options.autoplay&&this.timming(this.play),this.options.isTouch&&this.$viewport.on("touchstart",{_:this},d).on("touchmove",{_:this,c:h},e).on("touchcancel",{_:this,c:h},g).on("touchend",{_:this,c:h},f)};return e.prototype={constructor:e,play:function(){var a=!(this.currentIndex+1<this.itemTotal);a?this.reversePlay():this.orderlyPlay(),this.timming(this.play)},orderlyPlay:function(){var a=this.$items.eq(this.currentIndex++).outerWidth();this.$scroller.animate({marginLeft:(this.scrollerLeft-=a)+"px"},this.options.speed),this.$navItems.filter(".hekr-slide-nav-item-active").removeClass("hekr-slide-nav-item-active"),this.$navItems.eq(this.currentIndex).addClass("hekr-slide-nav-item-active")},reversePlay:function(){this.$scroller.animate({marginLeft:0},this.options.speed),this.$navItems.filter(".hekr-slide-nav-item-active").removeClass("hekr-slide-nav-item-active"),this.$firstNavItem.addClass("hekr-slide-nav-item-active"),this.currentIndex=0,this.scrollerLeft=0},timming:function(a){var b=this;this.timer=setTimeout(function(){a.call(b)},this.options.delay)},untimming:function(){clearTimeout(this.timer)},refresh:function(){if(this.untimming(),this.$items=this.$scroller.find(".hekr-slide-item").filter(":visible"),this.$navItems=this.$nav.find(".hekr-slide-nav-item").filter(":visible"),this.$nav.find(".hekr-slide-nav-item").filter(":hidden").removeClass("hekr-slide-nav-item-active"),this.currentIndex=this.$navItems.index(a(".hekr-slide-nav-item-active")),this.itemTotal=this.$items.length,this.$scroller.css("width",100*this.itemTotal+"%"),this.$items.css("width",100/this.itemTotal+"%"),this.scrollerLeft=0,this.timer=null,this.$scroller.css({marginLeft:this.scrollerLeft+"px"}),-1===this.currentIndex)this.currentIndex=0,this.$navItems.eq(this.currentIndex).addClass("hekr-slide-nav-item-active");else if(this.currentIndex>0){var b=this.$items.eq(this.currentIndex).position().left;this.scrollerLeft=-b,this.$scroller.css({marginLeft:this.scrollerLeft+"px"})}this.options.autoplay&&this.timming(this.play)}},a.fn.hekrSlide=function(b){return this.each(function(){a.data(this,"hekrSlide")||a.data(this,"hekrSlide",new e(this,b))})},a.hekrSlide=e}(a,window,document),function(a,b,c,d){"use strict";var e=function(b,c){this.$this=a(b),c=c||{},this.options={background:"rgba(0, 0, 0, .25)",color:"#13b5b1",width:10,radius:70,beginAngle:Math.PI/2,min:0,max:10,value:0},a.extend(this.options,c),this.cache=[],this.init()};e.prototype={constructor:e,init:function(){var b=this.$this.width(),d=this.$this.height(),e=Math.min(b,d);this.correctOptions(),console.log(this.cache),this.canvasNode=c.createElement("canvas"),this.$canvasNode=a(this.canvasNode),this.$canvasNode.attr({width:e,height:e}).css({margin:"0 auto"}),this.$this.append(this.$canvasNode),this.context=this.canvasNode.getContext("2d"),this.center=Math.floor(e/2),this.drawBackground(),this.drawCircle()},drawBackground:function(){for(var a=this.cache.length;a--;)this.context.beginPath(),this.context.arc(this.center,this.center,this.cache[a].radius,0,2*Math.PI,!1),this.context.lineWidth=this.cache[a].width,this.context.strokeStyle=this.cache[a].background,this.context.stroke(),this.context.closePath()},drawCircle:function(){for(var a=this.cache.length,b=0,c=0;a>b;b++)c=(this.cache[b].value-this.cache[b].min)/(this.cache[b].max-this.cache[b].min)*Math.PI*2+this.cache[b].beginAngle,this.context.beginPath(),this.context.arc(this.center,this.center,this.cache[b].radius,this.cache[b].beginAngle,c,!1),this.context.lineWidth=this.cache[b].width,this.context.strokeStyle=this.cache[b].color,this.context.stroke(),this.context.closePath()},redraw:function(b){a.extend(this.options,b),this.correctOptions(),this.context.clearRect(0,0,this.$this.width(),this.$this.height()),this.drawBackground(),this.drawCircle()},correctOptions:function(){if(this.options.circles&&a.isArray(this.options.circles)&&this.options.circles.length){var b=this.options.circles.length;for(this.cache=this.options.circles;b--;)"undefined"==typeof this.options.circles[b].background&&(this.cache[b].background=this.options.background),"undefined"==typeof this.options.circles[b].color&&(this.cache[b].color=this.options.color),"undefined"==typeof this.options.circles[b].width&&(this.cache[b].width=this.options.width),"undefined"==typeof this.options.circles[b].radius&&(this.cache[b].radius=this.options.radius),"undefined"==typeof this.options.circles[b].beginAngle&&(this.cache[b].beginAngle=this.options.beginAngle),"undefined"==typeof this.options.circles[b].min&&(this.cache[b].min=this.options.min),"undefined"==typeof this.options.circles[b].max&&(this.cache[b].max=this.options.max),"undefined"==typeof this.options.circles[b].value&&(this.cache[b].value=this.options.value),a.isArray(this.options.values)&&"undefined"!=typeof this.options.values[b]&&a.isNumeric(parseFloat(this.options.values[b]))&&(this.cache[b].value=this.options.values[b])}else this.cache=[],this.cache[0]={},this.cache[0].background=this.options.background,this.cache[0].color=this.options.color,this.cache[0].width=this.options.width,this.cache[0].radius=this.options.radius,this.cache[0].beginAngle=this.options.beginAngle,this.cache[0].min=this.options.min,this.cache[0].max=this.options.max,this.cache[0].value=this.options.value,a.isArray(this.options.values)&&"undefined"!=typeof this.options.values[0]&&a.isNumeric(parseFloat(this.options.values[0]))&&(this.cache[0].value=this.options.values[0])}},a.fn.hekrCircle=function(b){return this.each(function(){a.data(this,"hekrCircle")||a.data(this,"hekrCircle",new e(this,b))})}}(a,window,document),function(a,b,c){"use strict";var d=function(a){return String(a).length<2?"0"+a:a.toString()},e=300,f='<div class="hekr-timing">{overview}</div>',g='<div class="hekr-timing-overview">{header}{items}</div>',h='<div class="hekr-timing-header"><a class="hekr-timing-edit" href="javascript:;">{edit}</a><span>{title}</span><a class="hekr-timing-add" href="javascript:;">{add}</a></div>',i='<div class="hekr-timing-item {off}"><div class="hekr-timing-scroller"><div class="hekr-timing-reduce"><i class="hekr-iconfont">{circleIcon}</i></div><div class="hekr-timing-content"><div class="hekr-timing-name">{name}</div><div class="hekr-timing-middle"><div class="hekr-timing-time">{time}</div><div class="hekr-timing-main">{main}</div><div class="hekr-timing-checkbox"><input type="checkbox" {checked}></div><div class="hekr-timing-arrow"><i class="hekr-iconfont">{arrowIcon}</i></div></div><div class="hekr-timing-bottom">{parts}</div></div><div class="hekr-timing-delete"><i class="hekr-iconfont">{deleteIcon}</i></div></div></div>',j='<p class="hekr-timing-empty">{message}</p>',k='<div class="hekr-timing-parts">{values}</div>',l='<div class="hekr-timing-new">'+h+'<div class="hekr-timing-cell"><div class="hekr-timing-label hekr-float-left">{labelName}</div><input type="text" class="hekr-timing-input" value=""></div><div class="hekr-timing-cell"><div class="hekr-timing-label">{timeName}</div><div class="hekr-timing-date"></div></div>{cells}</div>',m='<div class="hekr-timing-cell{typeClass}" data-hekr-model="{dataHekrModel}"><div class="hekr-timing-label">{labelName}</div><div class="hekr-timing-options">{options}</div></div>',n='<a class="hekr-timing-option" style="width: {width}">{optionName}</a>',o='<div class="hekr-timing-cell{typeClass}" data-hekr-model="{dataHekrModel}"><div class="hekr-timing-label hekr-float-left">{labelName}</div><div class="hekr-timing-assisted hekr-float-right"><i class="hekr-iconfont">{arrowIcon}</i></div><div class="hekr-timing-assisted hekr-timing-cell-label hekr-float-right"></div></div>',p='<div class="hekr-timing-goto"><div class="hekr-timing-header"><a class="hekr-timing-edit" href="javascript:;">{back}</a><span></span><a class="hekr-timing-add" href="javascript:;">{confirm}</a></div><div class="hekr-timing-checks"></div></div>',q='<div class="hekr-timing-check{isOn}"><div class="hekr-float-left">{name}</div><div class="hekr-float-right"><i class="hekr-iconfont">{icon}</i></div></div>',r=function(b,c){if(!(this instanceof r))return new r(b,c);this.ele=b,this.$ele=a(b);var d={limit:1/0,limitMessage:"预约条数已达上限！",timingTitle:"预约总览",addTitle:"新增预约",editTitle:"预约编辑",emptyMessage:"暂无预约，请添加！",labelMessage:"未命名",requiredMessage:"没有被选择",beforeEditButtonText:"编辑",afterEditButtonsText:"完成",addButtonText:"添加",cancelButtonText:"取消",confirmButtonText:"确定",circleIcon:"&otimes;",deleteIcon:"&times;",arrowIcon:"&gt;",chooseIcon:"&radic;",onCreate:null,createContext:b,onDelete:null,deleteContext:b,onUpdate:null,updateContext:b,onSwitch:null,switchContext:b};this.options=a.extend({},d,c),this.editType="add",this.editDataCache={name:null,time:[],on:null,main:{values:[]}},this.options.models.repeats&&(this.editDataCache.repeats={values:[]}),a.isArray(this.options.models.others)&&this.options.models.others.length&&(this.editDataCache.others=[]),this.editIndex=-1,this._append()};return r.prototype._append=function(){var c=this.options,e=this.$ele,l=h.replace("{edit}",c.beforeEditButtonText).replace("{title}",c.timingTitle).replace("{add}",c.addButtonText),m="",n=c.models,o=n.main,p=n.repeats,q=n.others,r=c.data,s=r.length,t=0;if(s)for(;s>t;t++){var u=0,v=r[t],w=i.replace("{circleIcon}",c.circleIcon).replace("{name}",v.name).replace("{time}",d(v.time[0])+":"+d(v.time[1])).replace("{arrowIcon}",c.arrowIcon).replace("{deleteIcon}",c.deleteIcon);w=v.on?w.replace("{checked}",'checked="checked"').replace("{off}",""):w.replace("{checked}","").replace("{off}","hekr-timing-item-off");var x=this._getMaps(o,v.main),y="";if(v.repeats){var z=this._getMaps(p,v.repeats);y+=k.replace("{values}",z)}if(a.isArray(c.models.others)&&c.models.others.length){var A=v.others,B=a.isArray(A)?A.length:0;for(u=0;B>u;u++){var C=q[u],D=A[u],E=this._getMaps(C,D);y+=k.replace("{values}",E)}}w=w.replace("{main}",x).replace("{parts}",y),m+=w}else m=j.replace("{message}",c.emptyMessage);var F=g.replace("{header}",l).replace("{items}",m),G=f.replace("{overview}",F);e.html(G);var H=this.$timing=e.find(".hekr-timing"),I=this.$overview=H.find(".hekr-timing-overview"),J=this.$overviewHeader=I.find(".hekr-timing-header"),K=this.$overviewEdit=J.find(".hekr-timing-edit"),L=this.$overviewAdd=J.find(".hekr-timing-add"),M=this.$items=I.find(".hekr-timing-item"),N=this.$scrollers=M.find(".hekr-timing-scroller"),O=this.$reduces=N.find(".hekr-timing-reduce"),P=this.$contents=N.find(".hekr-timing-content"),Q=this.$checkboxes=P.find(".hekr-timing-checkbox"),R=this.$deletes=N.find(".hekr-timing-delete");this.$arrows=N.find(".hekr-timing-arrow");s||K.hide(),Q.find('input[type="checkbox"]').hekrSwitches({onChange:this._switchesChangeEvt,changeContext:this});var S=this.wrapWidth=a(b).width(),T=this.reduceWidth=O.outerWidth(),U=this.deleteWidth=R.outerWidth(),V=this.scrollerWidth=S+T+U+1,W=this.contentWidth=S;N.css("width",V+"px"),P.css("width",W+"px"),K.off(".timing").on("tap.timing",a.proxy(this._edit,this)),L.off(".timing").on("tap.timing",a.proxy(this._add,this)),O.off(".timing").on("tap.timing",a.proxy(this._reduce,this)),R.off(".timing").on("tap.timing",a.proxy(this._delete,this))},r.prototype._switchesChangeEvt=function(b,c){var d=b.checked,e=this.options,f=this.$checkboxes.find("input"),g=f.index(c),h=e.data[g],i=this.ele;h.on=d,a.isFunction(e.onSwitch)&&e.onSwitch.call(e.switchContext,g,h,this,i,e)},r.prototype._getMaps=function(b,c){var d=c.alias;if(void 0!==d&&null!==d)return d;var e=b.type,f=b.values,g=b.maps,h=[].concat(c.values);1!==e&&3!==e||(h=[h.shift()]);for(var i,j=h.length,k=0,l=[];j>k;k++)i=a.inArray(h[k],f),-1!==i&&"undefined"!=typeof g[i]&&l.push(g[i]);return l.join("&nbsp;&nbsp;")},r.prototype._edit=function(){if(this.$arrows.is(":hidden")){this.$scrollers.animate({left:0,width:this.scrollerWidth-this.reduceWidth+"px"},e),this.$contents.animate({width:this.contentWidth-this.reduceWidth+"px"},e),this.$arrows.css({display:"block",opacity:0}),this.$arrows.animate({opacity:1},e),this.$checkboxes.animate({opacity:0},e,null,function(){a(this).hide()}),this.$overviewEdit.text(this.options.afterEditButtonsText),this.$overviewEdit.off(".timing").on("tap.timing",a.proxy(this._finish,this));var b=this;this.$contents.each(function(c){var d=a(this);d.off(".timing").on("tap.timing",{index:c},a.proxy(b._add,b))})}},r.prototype._finish=function(){this.$checkboxes.is(":hidden")&&(this.$scrollers.animate({left:-this.reduceWidth+"px",width:this.scrollerWidth+"px"},e),this.$contents.animate({width:this.contentWidth+"px"},e),this.$checkboxes.css({display:"block",opacity:0}),this.$checkboxes.animate({opacity:1},e),this.$arrows.animate({opacity:0},e,null,function(){a(this).hide()}),this.$overviewEdit.text(this.options.beforeEditButtonText),this.$overviewEdit.off(".timing").on("tap.timing",a.proxy(this._edit,this)),this.$contents.off(".timing"))},r.prototype._add=function(b){var c=this.options,d=c.data,e=!!b.data;if(!e&&d.length+1>c.limit)return void a.hekrToast(c.limitMessage);this._finish();var f=this.$edit;f&&f.length||this._appendEditPage();var g,h=this.editDataCache;if(e){this.editType="edit";var i=parseInt(b.data.index,10);this.editIndex=i;var j=c.data[i];if(h.name=j.name,h.time=[].concat(j.time),h.on=j.on,h.main.values=[].concat(j.main.values),c.models.repeats&&(h.repeats.values=[].concat(j.repeats.values)),a.isArray(c.models.others)&&c.models.others.length)for(g=0;g<h.others.length;g++)h.others[g].values=[].concat(j.others[g].values)}else{this.editType="add";var k=new Date,l=k.getHours(),m=k.getMinutes();if(h.name=c.labelMessage,h.time=[l,m],h.on=!0,h.main.values=[],c.models.repeats&&(h.repeats.values=[]),a.isArray(c.models.others)&&c.models.others.length)for(g=0;g<h.others.length;g++)h.others[g].values=[]}this._updateEditState(),this.$overview.hide(),this.$edit.show()},r.prototype._reduce=function(a){var b=a.currentTarget,c=this.$reduces.index(b);this.$scrollers.not(this.$scrollers.eq(c)[0]).animate({left:0},e),this.$scrollers.eq(c).animate({left:-this.deleteWidth+"px"},e)},r.prototype._delete=function(b){var c=b.currentTarget,d=this.$deletes.index(c),e=this.options,f=e.data[d],g=this.ele;a.isFunction(e.onDelete)&&e.onDelete.call(e.deleteContext,d,f,this,g,e)},r.prototype._appendEditPage=function(){var b=this.options,c=b.models,d=l,e=[],f=[],g="",h=0,i=0;1===c.main.type||2===c.main.type?(e.push(c.main),e[e.length-1].dataHekrModel="main"):3!==c.main.type&&4!==c.main.type||(f.push(c.main),f[f.length-1].dataHekrModel="main"),c.repeats&&(1===c.repeats.type||2===c.repeats.type?(e.push(c.repeats),e[e.length-1].dataHekrModel="repeats"):3!==c.repeats.type&&4!==c.repeats.type||(f.push(c.repeats),f[f.length-1].dataHekrModel="repeats"));var j=this.editDataCache;if(a.isArray(c.others)&&c.others.length)for(;h<c.others.length;h++)1===c.others[h].type||2===c.others[h].type?(e.push(c.others[h]),e[e.length-1].dataHekrModel="others"+h):3!==c.others[h].type&&4!==c.others[h].type||(f.push(c.others[h]),f[f.length-1].dataHekrModel="others"+h),j.others[h]={values:[]};var k="",p=e.length;for(h=0;p>h;h++){var q=e[h].maps,r=q.length,s=100/r,t="";for(i=0;r>i;i++)t+=n.replace("{width}",s+"%").replace("{optionName}",q[i]);k=1===e[h].type?" hekr-timing-current-single":2===e[h].type?" hekr-timing-current-multiple":"";var u=m.replace("{labelName}",e[h].name).replace("{typeClass}",k).replace("{options}",t);u=e[h].dataHekrModel?u.replace("{dataHekrModel}",e[h].dataHekrModel):u.replace("{dataHekrModel}",""),g+=u}var v=f.length;for(h=0;v>h;h++){k=3===f[h].type?" hekr-timing-new-single":4===f[h].type?" hekr-timing-new-multiple":"";var w=o.replace("{labelName}",f[h].name).replace("{typeClass}",k).replace("{arrowIcon}",b.arrowIcon);w=f[h].dataHekrModel?w.replace("{dataHekrModel}",f[h].dataHekrModel):w.replace("{dataHekrModel}",""),g+=w}d=d.replace("{edit}",b.cancelButtonText).replace("{add}",b.confirmButtonText).replace("{title}",b.editTitle).replace("{labelName}",c.label.name).replace("{timeName}",c.time.name).replace("{cells}",g);var x=this.$timing;x.append(d);var y=this.$edit=x.find(".hekr-timing-new"),z=this.$editHeader=y.find(".hekr-timing-header"),A=this.$editCancel=z.find(".hekr-timing-edit"),B=this.$editConfirm=z.find(".hekr-timing-add"),C=this.$editCells=y.find(".hekr-timing-cell"),D=this.$editLabel=C.find(".hekr-timing-input"),E=this.$editTime=C.find(".hekr-timing-date"),F=this.$editCurrentSingle=C.filter(".hekr-timing-current-single"),G=this.$editCurrentMultiple=C.filter(".hekr-timing-current-multiple"),H=this.$editNewSingle=C.filter(".hekr-timing-new-single"),I=this.$editNewMultiple=C.filter(".hekr-timing-new-multiple");E.hekrTimePicker({onChange:function(a){this.editDataCache.time[0]=parseInt(a.hours,10),this.editDataCache.time[1]=parseInt(a.minutes,10)},changeContext:this});this.$editTimeInstance=E.data("hekrTimePicker");F.on("tap",".hekr-timing-option",{isMultipleSelected:!1},a.proxy(this._editSelectEvt,this)),G.on("tap",".hekr-timing-option",{isMultipleSelected:!0},a.proxy(this._editSelectEvt,this));var J=H.add(I);J.on("touchstart",function(){a(this).addClass("hekr-timing-cell-press")}),J.on("touchend touchcancel",a.proxy(this._editJumpEvt,this)),D.off().on("input propertychange",a.proxy(function(){var a=D.val();a||(a=this.options.labelMessage),this.editDataCache.name=a},this)),A.on("tap.timing",a.proxy(function(){y.hide(),this.$overview.show()},this)),B.on("tap.timing",a.proxy(this._editConfirmEvt,this))},r.prototype._editConfirmEvt=function(b){var c=this.options,d=c.models,e=c.data,f=this.ele,g=this.editType,h=this.editDataCache,i=-1;if(d.main.required&&!h.main.values.length)return void a.hekrToast(d.main.name+c.requiredMessage);if(d.repeats&&d.repeats.required&&!h.repeats.values.length)return void a.hekrToast(d.repeats.name+c.requiredMessage);if(a.isArray(c.models.others)&&c.models.others.length)for(var j=d.others.length;j--;)if(d.others[j].required&&!h.others[j].values.length)return void a.hekrToast(d.others[j].name+c.requiredMessage);if(d.repeats&&!h.repeats.values.length){var k=h.time[0],l=h.time[1],m=new Date,n=m.getHours(),o=m.getMinutes();if(n>k||k===n&&o>l)return void a.hekrToast("Time has passed.")}switch(g){case"add":i=e.length,a.isFunction(c.onCreate)&&c.onCreate.call(c.createContext,i,h,this,f,c);break;case"edit":i=this.editIndex,a.isFunction(c.onUpdate)&&c.onUpdate.call(c.updateContext,i,h,this,f,c)}},r.prototype._updateEditState=function(){var b=this.options,c=b.models.main,d=b.models.repeats,e=b.models.others,f=this.editDataCache,g=this.$edit,h=this.$editCells=g.find(".hekr-timing-cell"),i=this.$editLabel=h.find(".hekr-timing-input"),j=this.$editTimeInstance;if(i.val(f.name),j.update({hours:f.time[0],minutes:f.time[1]}),this._updateCellState(c,f.main.values,"main"),d&&this._updateCellState(d,f.repeats.values,"repeats"),a.isArray(b.models.others)&&b.models.others.length)for(var k=f.others.length;k--;)this._updateCellState(e[k],f.others[k].values,"others"+k)},r.prototype._updateCellState=function(b,c,d){var e=1===b.type||2===b.type||!1,f=this.$editCells.filter('[data-hekr-model="'+d+'"]');
if(e){var g=f.find(".hekr-timing-option");g.removeClass("hekr-timing-on");for(var h=c.length;h--;){var i=a.inArray(c[h],b.values);g.eq(i).addClass("hekr-timing-on")}}else{for(var j=[],k=0;k<c.length;k++){var l=a.inArray(c[k],b.values);j.push(b.maps[l])}j=j.join("&nbsp;&nbsp;");var m=f.find(".hekr-timing-cell-label");m.html(j)}},r.prototype._editSelectEvt=function(b){var c=b.data.isMultipleSelected,d=b.currentTarget,e=a(d),f=e.parent().find(".hekr-timing-option"),g=f.index(d),h=this._getModels(e),i=h.cacheModel,j=h.realModel,k=!!j.required,l=e.is(".hekr-timing-on"),m=f.not(d).filter(".hekr-timing-on"),n=!!m.length||l;if(c)if(n)if(!l||m.length||k){if(m.length){l?e.removeClass("hekr-timing-on"):e.addClass("hekr-timing-on");var o=f.filter(".hekr-timing-on");i.values=[],o.each(function(){var a=f.index(this);i.values.push(j.values[a])})}}else e.removeClass("hekr-timing-on"),i.values=[];else e.addClass("hekr-timing-on"),i.values[0]=j.values[g];else n?l?k||(e.removeClass("hekr-timing-on"),i.values=[]):(m.removeClass("hekr-timing-on"),e.addClass("hekr-timing-on"),i.values[0]=j.values[g]):(e.addClass("hekr-timing-on"),i.values[0]=j.values[g])},r.prototype._editJumpEvt=function(b){var c=a(b.currentTarget),d=c.attr("data-hekr-model"),e=c.is(".hekr-timing-new-multiple");c.removeClass("hekr-timing-cell-press");var f=this.$goto;f&&f.length||this._appendGotoPage(),f=this.$goto,f.attr("data-hekr-model",d);var g=this._getModels(c),h=g.cacheModel,i=g.realModel;this.$gotoTitle.text(i.name);for(var j="",k="",l=0;l<i.maps.length;l++)k=-1!==a.inArray(i.values[l],h.values)?" hekr-timing-on":"",j+=q.replace("{isOn}",k).replace("{name}",i.maps[l]).replace("{icon}",this.options.chooseIcon);var m=this.$gotoChecks;m.html(j),f.show(),this.$edit.hide(),m.find(".hekr-timing-check").off(".timing").on("touchstart",function(){a(this).addClass("hekr-timing-press")}).on("touchend touchmove",{isNewMultiple:e},a.proxy(this._gotoCheckEvt,this))},r.prototype._getModels=function(b){var c,d=this.editDataCache,e=this.options.models;if(b.attr("data-hekr-model"))c=b.attr("data-hekr-model");else{var f=b.parents(".hekr-timing-cell");c=f.attr("data-hekr-model")}if("main"===c)return{cacheModel:d.main,realModel:e.main};if(this.options.models.repeats&&"repeats"===c)return{cacheModel:d.repeats,realModel:e.repeats};if(a.isArray(this.options.models.others)&&this.options.models.others.length&&/others\d+/.test(c)){var g=parseInt(c.substring(6),10);return{cacheModel:d.others[g],realModel:e.others[g]}}},r.prototype._appendGotoPage=function(){var b=this.options,c=this.$timing,d=p.replace("{back}",b.cancelButtonText).replace("{confirm}",b.confirmButtonText);c.append(d);var e=this.$goto=c.find(".hekr-timing-goto"),f=this.$gotoHeader=e.find(".hekr-timing-header"),g=this.$gotoCancel=f.find(".hekr-timing-edit"),h=this.$gotoConfirm=f.find(".hekr-timing-add");this.$gotoTitle=f.find("span"),this.$gotoChecks=e.find(".hekr-timing-checks");g.on("tap",a.proxy(function(){this.$goto.hide(),this.$edit.show()},this)),h.on("tap",a.proxy(this._gotoConfirmEvt,this))},r.prototype._gotoCheckEvt=function(b){var c=b.currentTarget,d=a(c);d.removeClass("hekr-timing-press");var e=!!b.data.isNewMultiple,f=d.parent().find(".hekr-timing-check"),g=this._getModels(this.$goto),h=g.realModel,i=h.required,j=d.is(".hekr-timing-on"),k=f.not(c).filter(".hekr-timing-on"),l=!!k.length||j;e?l?!j||k.length||i?k.length&&(j?d.removeClass("hekr-timing-on"):d.addClass("hekr-timing-on")):d.removeClass("hekr-timing-on"):d.addClass("hekr-timing-on"):l?j?i||d.removeClass("hekr-timing-on"):(k.removeClass("hekr-timing-on"),d.addClass("hekr-timing-on")):d.addClass("hekr-timing-on")},r.prototype._gotoConfirmEvt=function(a){var b=this.$goto,c=this.$gotoChecks.find(".hekr-timing-check"),d=c.filter(".hekr-timing-on"),e=this.$edit,f=b.attr("data-hekr-model"),g=e.find('[data-hekr-model="'+f+'"]').find(".hekr-timing-cell-label"),h=this._getModels(b),i=h.cacheModel,j=h.realModel,k=[],l=[];d.each(function(){var a=c.index(this),b=j.values[a],d=j.maps[a];l.push(b),k.push(d)}),i.values=l,k=k.join("&nbsp;&nbsp;"),g.html(k),b.hide(),this.$edit.show()},r.prototype.create=function(b){var c=this.options,e=c.models,f=c.data.length,g=this.$overview;g.find(".hekr-timing-empty").hide(),this.$overviewEdit.show();var h=i.replace("{circleIcon}",c.circleIcon).replace("{name}",b.name).replace("{time}",d(b.time[0])+":"+d(b.time[1])).replace("{arrowIcon}",c.arrowIcon).replace("{deleteIcon}",c.deleteIcon),j=this._getMaps(e.main,b.main),l="";if(c.models.repeats){var m=this._getMaps(e.repeats,b.repeats);l+=k.replace("{values}",m)}if(a.isArray(c.models.others)&&c.models.others.length)for(var n=b.others,o=n.length,p=0;o>p;p++){var q=e.others[p],r=n[p],s=this._getMaps(q,r);l+=k.replace("{values}",s)}h=h.replace("{main}",j).replace("{parts}",l);var t=a(h);if(g.append(t),t.find(".hekr-timing-checkbox").html('<input type="checkbox" checked="checked">'),t.find('.hekr-timing-checkbox > input[type="checkbox"]').hekrSwitches({onChange:this._switchesChangeEvt,changeContext:this}),this._reselectElement(),this.$reduces.off(".timing").on("tap.timing",a.proxy(this._reduce,this)),this.$deletes.off(".timing").on("tap.timing",a.proxy(this._delete,this)),c.data[f]={},c.data[f].name=b.name,c.data[f].time=[].concat(b.time),c.data[f].on=!0,c.data[f].main={},c.data[f].main.values=[].concat(b.main.values),c.data[f].main.alias=b.main.alias?b.main.alias.toString():null,c.models.repeats&&(c.data[f].repeats={},c.data[f].repeats.values=[].concat(b.repeats.values),c.data[f].repeats.alias=b.repeats.alias?b.repeats.alias.toString():null),a.isArray(c.models.others)&&c.models.others.length){c.data[f].others=[];for(var u=0;u<b.others.length;u++)c.data[f].others[u]={},c.data[f].others[u].values=[].concat(b.others[u].values),c.data[f].others[u].alias=b.others[u].alias?b.others[u].alias.toString():null}this.$edit.hide(),g.show()},r.prototype["delete"]=function(b){var c=this.options;b=parseInt(b,10),this.$items.eq(b).animate({height:0},e,"swing",a.proxy(function(){if(this.$items.eq(b).remove(),c.data.splice(b,1),this._reselectElement(),!c.data.length){var d=j.replace("{message}",c.emptyMessage);this.$overview.append(d),this.$overviewEdit.hide(),this.$overviewEdit.text(this.options.beforeEditButtonText),this.$overviewEdit.off(".timing").on("tap.timing",a.proxy(this._edit,this))}},this))},r.prototype.update=function(b,c){var e=this.options,f=e.models,g=this.$items,h=g.eq(b);h.find(".hekr-timing-name").text(c.name),h.find(".hekr-timing-time").text(d(c.time[0])+":"+d(c.time[1]));var i=this._getMaps(f.main,c.main);h.find(".hekr-timing-main").text(i);var j="";if(f.repeats){var l=this._getMaps(f.repeats,c.repeats);j+=k.replace("{values}",l)}if(a.isArray(e.models.others)&&e.models.others.length)for(var m=c.others,n=m.length,o=0;n>o;o++){var p=f.others[o],q=m[o],r=this._getMaps(p,q);j+=k.replace("{values}",r)}if(h.find(".hekr-timing-bottom").html(j),e.data[b].name=c.name,e.data[b].time=[].concat(c.time),e.data[b].main.values=[].concat(c.main.values),e.data[b].main.alias=c.main.alias?c.main.alias.toString():null,e.models.repeats&&(e.data[b].repeats.values=[].concat(c.repeats.values),e.data[b].repeats.alias=c.repeats.alias?c.repeats.alias.toString():null),a.isArray(e.models.others)&&e.models.others.length)for(var s=0;s<c.others.length;s++)e.data[b].others[s].values=[].concat(c.others[s].values),e.data[b].others[s].alias=c.others[s].alias?c.others[s].alias.toString():null;this.$edit.hide(),this.$overview.show(),this._reselectElement()},r.prototype["switch"]=function(a,b){var c=this.$items.eq(a),d=this.options;c.is(".hekr-timing-item-off")?c.removeClass("hekr-timing-item-off"):c.addClass("hekr-timing-item-off"),d.data[a].on=b.on},r.prototype.switchBack=function(a){var b=this.$checkboxes.find("input"),c=b.eq(a).data("hekrSwitches"),d=!c.getValues().checked;c.update({checked:d}),this.options.data[a].on=d},r.prototype._reselectElement=function(){var c=this.$overview,d=this.$items=c.find(".hekr-timing-item"),e=this.$scrollers=d.find(".hekr-timing-scroller"),f=this.$reduces=e.find(".hekr-timing-reduce"),g=this.$contents=e.find(".hekr-timing-content"),h=(this.$checkboxes=g.find(".hekr-timing-checkbox"),this.$deletes=e.find(".hekr-timing-delete")),i=(this.$arrows=e.find(".hekr-timing-arrow"),this.wrapWidth=a(b).width()),j=this.reduceWidth=f.outerWidth(),k=this.deleteWidth=h.outerWidth();this.scrollerWidth=i+j+k+1,this.contentWidth=i},a.fn.hekrTiming=function(b){return this.each(function(){a.data(this,"hekrTiming")||a.data(this,"hekrTiming",new r(this,b))})},a.hekrTiming=r}(a,window,document),function(a,b,c){"use strict";var d='<div class="hekr-delay"><h3 class="hekr-delay-title">{title}</h3><div class="hekr-delay-cell hekr-delay-open"><h4 class="hekr-delay-cell-title">{openLabel}</h4><div class="hekr-delay-time"><div class="hekr-delay-time-inner{openShade}"></div></div><div class="hekr-delay-switches"><div class="hekr-delay-switches-inner"><input type="checkbox" {openChecked}></div></div></div><div class="hekr-delay-hr"></div><div class="hekr-delay-cell hekr-delay-close"><h4 class="hekr-delay-cell-title">{closeLabel}</h4><div class="hekr-delay-time"><div class="hekr-delay-time-inner{closeShade}"></div></div><div class="hekr-delay-switches"><div class="hekr-delay-switches-inner"><input type="checkbox" {closeChecked}></div></div></div></div>',e='<div class="hekr-delay-mask"><div class="hekr-delay-mask-hours">{hours}</div><div class="hekr-delay-mask-minutes">{minutes}{after}<span class="hekr-delay-assisted">{switch}</span></div></div>',f=function(b,c){if(!(this instanceof f))return new f(b,c);this.ele=b,this.$ele=a(b);var d={title:"延时设置",open:{label:"延时开",on:!1,hours:0,minutes:0,onChange:null,changeContext:this,onSwitch:null,switchContext:this},close:{label:"延时关",on:!1,hours:0,minutes:0,onChange:null,changeContext:this,onSwitch:null,switchContext:this},mask:{hours:"小时",minutes:"分钟",after:"后",open:"开",close:"关"}};this.options=a.extend(!0,{},d,c),this._append()};return f.prototype._append=function(){var a=this.options,b=this.$ele,c=a.open.on?'checked="checked"':"",f=a.close.on?'checked="checked"':"",g=a.open.on?"":" hekr-delay-shade",h=a.close.on?"":" hekr-delay-shade",i=d.replace("{title}",a.title).replace("{openLabel}",a.open.label).replace("{closeLabel}",a.close.label).replace("{openChecked}",c).replace("{closeChecked}",f).replace("{openShade}",g).replace("{closeShade}",h);b.html(i);var j=this.$delay=b.find(".hekr-delay"),k=this.$openCell=j.find(".hekr-delay-open"),l=this.$openTime=k.find(".hekr-delay-time-inner"),m=this.$openSwitches=k.find(".hekr-delay-switches-inner > input"),n=this.$closeCell=j.find(".hekr-delay-close"),o=this.$closeTime=n.find(".hekr-delay-time-inner"),p=this.$closeSwitches=n.find(".hekr-delay-switches-inner > input"),q={hours:a.open.hours,minutes:a.open.minutes,onChange:a.open.onChange};"undefined"!=typeof a.open.changeContext&&(q.changeContext=a.open.changeContext),l.hekrTimePicker(q);var r={hours:a.close.hours,minutes:a.close.minutes,onChange:a.close.onChange};"undefined"!=typeof a.close.changeContext&&(r.changeContext=a.close.changeContext),o.hekrTimePicker(r);var s={onChange:a.open.onSwitch};"undefined"!=typeof a.open.switchContext&&(s.changeContext=a.open.switchContext),m.hekrSwitches(s);var t={onChange:a.close.onSwitch};"undefined"!=typeof a.close.switchContext&&(t.changeContext=a.close.switchContext),p.hekrSwitches(t);var u=this.$openMask=l.find(".hekr-time-picker-mask"),v=this.$closeMask=o.find(".hekr-time-picker-mask"),w=e.replace("{hours}",a.mask.hours).replace("{minutes}",a.mask.minutes).replace("{after}",a.mask.after).replace("{switch}",a.mask.open),x=e.replace("{hours}",a.mask.hours).replace("{minutes}",a.mask.minutes).replace("{after}",a.mask.after).replace("{switch}",a.mask.close);u.html(w),v.html(x)},f.prototype.getInstance=function(){return{openTimeInstance:this.$openTime.data("hekrTimePicker"),closeTimeInstance:this.$closeTime.data("hekrTimePicker"),openSwitchesInstance:this.$openSwitches.data("hekrSwitches"),closeSwitchesInstance:this.$closeSwitches.data("hekrSwitches")}},f.prototype["switch"]=function(b){var c=this.$openTime,d=this.$closeTime,e="open"===b?c:"close"===b?d:a({}),f=e.is(".hekr-delay-shade");f?e.removeClass("hekr-delay-shade"):e.addClass("hekr-delay-shade")},f.prototype.switchBack=function(a){var b,c=this.getInstance(),d=c.openSwitchesInstance,e=c.closeSwitchesInstance,f="open"===a?d:"close"===a?e:{};f.getValues&&(b=f.getValues().checked),f.update&&f.update({checked:!b})},a.fn.hekrDelay=function(b){return this.each(function(){a.data(this,"hekrDelay")||a.data(this,"hekrDelay",new f(this,b))})},a.hekrDelay=f}(a,window,document),function(a,b,c,d){"use strict";var e='<div class="hekr-adjuster"><div class="hekr-adjuster-track"><div class="hekr-adjuster-tarck-inner"></div><div class="hekr-adjuster-trangle"></div><div class="hekr-adjuster-semicircle-left"></div><div class="hekr-adjuster-semicircle-right"></div></div><div class="hekr-adjuster-canvas"><canvas width="240" height="240"></canvas></div><div class="hekr-adjuster-text"><div class="hekr-adjuster-value"><span class="hekr-adjuster-value-number">--</span><span class="hekr-adjuster-unit">{unit}<span></div><div class="hekr-adjuster-title">{title}</div></div><div class="hekr-adjuster-slider"></div></div>',f=function(b,d){if(!(this instanceof f))return new f(b,d);this.ele=b,this.$ele=a(b),this.$doc=a(c);var e={title:"",disabled:!1,min:0,max:60,toFixed:0,value:0,unit:"",onStart:null,onFinish:null,onChange:null,onUpdate:null,startContext:b,changeContext:b,finishContext:b,updateContext:b};this.options=a.extend({},e,d),this._init()};return f.prototype._init=function(){this.value=this.options.value,this.oldValue=this.value,this.disabled=this.options.disabled,this._append(),this.disabled?this._unbind():this._bind()},f.prototype._append=function(){var a=this.options,b=this.$ele,c=e.replace("{unit}",a.unit).replace("{title}",a.title);b.html(c);var d=this.$adjuster=b.find(".hekr-adjuster"),f=this.$track=d.find(".hekr-adjuster-track"),g=this.$trackInner=f.find(".hekr-adjuster-tarck-inner"),h=this.$canvasBlock=d.find(".hekr-adjuster-canvas"),i=this.$canvas=h.find("canvas"),j=this.canvas=i.get(0),k=this.context=j.getContext("2d"),l=(this.$value=b.find(".hekr-adjuster-value-number"),this.$unit=b.find(".hekr-adjuster-unit"),this.$title=b.find(".hekr-adjuster-title"),this.$slider=d.find(".hekr-adjuster-slider")),m=this.adjusterSize=f.width(),n=this.trackSize=m/2-g.width()/2,o=(this.radius=g.width()/2+n/2,this.sliderSize=l.width());this.sliderOffset=o/2;this._draw(k,a.min,a.max,a.step,a.toFixed),this._setSliderPos(a.value)},f.prototype._draw=function(a,b,c,d,e){a.translate(120,120),a.lineWidth=1,a.strokeStyle="#545454",a.fillStyle="#f26738",a.font="12px",a.textAlign="left",a.textBaseline="middle";for(var f=(c-b)/60,g=0;61>g;g++){a.save();var h=3*Math.PI/4+3*Math.PI/2/60*g,i=95;if(g%10===0){i=90;var j=i-4,k=Math.cos(h)*j,l=Math.sin(h)*j;switch(g){case 0:a.textAlign="left",a.textBaseline="alphabetic";break;case 10:a.textAlign="left",a.textBaseline="middle";break;case 20:a.textAlign="left",a.textBaseline="hanging";break;case 30:a.textAlign="center",a.textBaseline="top";break;case 40:a.textAlign="right",a.textBaseline="hanging";break;case 50:a.textAlign="right",a.textBaseline="middle";break;case 60:a.textAlign="right",a.textBaseline="alphabetic";break;default:a.textAlign="center",a.textBaseline="middle"}var m=parseFloat(b+f*g).toFixed(e);a.fillText(""+m,k,l)}a.rotate(h),a.beginPath(),a.moveTo(i,.5),a.lineTo(102,.5),a.closePath(),a.stroke(),a.restore()}},f.prototype._setSliderPos=function(a){a=Number(a);var b=this.options,c=this.$slider,d=this.$value,e=b.min,f=b.max,g=this.sliderOffset,h=this.adjusterSize,i=this.radius,j=3*Math.PI/4+3*Math.PI/2/(f-e)*(a-e),k=Math.cos(j)*i+h/2-g,l=Math.sin(j)*i+h/2-g;c.css({left:k+"px",top:l+"px"}),a=parseFloat(a).toFixed(b.toFixed),d.text(a),this.value=a},f.prototype._bind=function(){this.$slider.off(".adjuster").on("touchstart.adjuster",a.proxy(this._start,this)),this.$adjuster.removeClass("hekr-adjuster-disabled")},f.prototype._unbind=function(){this.$slider.off(".adjuster"),this.$adjuster.addClass("hekr-adjuster-disabled")},f.prototype._start=function(b){var c=b.currentTarget,d=this.$slider,e=this.$doc,f=this.options,g=d.index(c);-1!==g&&(this.canvasOffset=this.$canvasBlock.offset(),e.off(".adjuster").on("touchmove.adjuster",a.proxy(this._move,this)).on("touchend.adjuster touchcancel.adjuster",a.proxy(this._end,this)),a.isFunction(f.onStart)&&f.onStart.call(f.startContext,{disabled:Boolean(this.disabled),value:this.value}))},f.prototype._move=function(a){a.preventDefault();var b=this.options,c=a.touches[0],d=c.pageX,e=c.pageY,f=this.canvasOffset,g=d-f.left,h=e-f.top,i=this.adjusterSize/2,j=i,k=Math.sqrt((g-i)*(g-i)+(h-j)*(h-j)),l=g>=i?h>=j?1:4:h>=j?2:3,m=3*Math.PI/4;switch(l){case 1:m=2*Math.PI+Math.asin(Math.abs(h-j)/k);break;case 2:m=Math.PI/2+Math.asin(Math.abs(g-i)/k);break;case 3:m=Math.PI+Math.asin(Math.abs(h-j)/k);break;case 4:m=3*Math.PI/2+Math.asin(Math.abs(g-i)/k)}m<3*Math.PI/4?m=3*Math.PI/4:m>9*Math.PI/4&&(m=9*Math.PI/4);var n=(m-3*Math.PI/4)/(9*Math.PI/4-3*Math.PI/4)*(b.max-b.min)+b.min;this._setSliderPos(n)},f.prototype._end=function(b){var c=this.options;this.value!==this.oldValue&&(a.isFunction(c.onChange)&&c.onChange.call(c.changeContext,{disabled:Boolean(this.disabled),value:this.value}),this.oldValue=this.value),a.isFunction(c.onFinish)&&c.onFinish.call(c.finishContext,{disabled:Boolean(this.disabled),value:this.value}),this.$doc.off(".adjuster")},f.prototype.getValues=function(){return{disabled:Boolean(this.disabled),value:this.value}},f.prototype.enable=function(){this.disabled=!1,this.options.disabled=!1,this._bind()},f.prototype.disable=function(){this.disabled=!0,this.options.disabled=!0,this._unbind()},f.prototype.update=function(b){a.extend(this.options,b),this._init();var c=this.options;a.isFunction(c.onUpdate)&&c.onUpdate.call(c.updateContext,{disabled:Boolean(this.disabled),value:this.value})},a.fn.hekrAdjuster=function(b){return this.each(function(){a.data(this,"hekrAdjuster")||a.data(this,"hekrAdjuster",new f(this,b))})},a.hekrAdjuster=f}(a,window,document),function(a,b,c,d,e){"use strict";function f(a){return 180*a/d.PI}function g(a){return a*d.PI/180}function h(a){function b(a){return a=0>a?a+1:a>1?a-1:parseFloat(a),1>6*a?f+6*(g-f)*a:1>2*a?g:2>3*a?f+(g-f)*(2/3-a)*6:f}a=a||{h:0,s:1,l:.5};var c,d,e,f,g,h,i="undefined"==typeof a.h?0:parseInt(a.h),j="undefined"==typeof a.s?1:parseFloat(a.s),k="undefined"==typeof a.l?.5:parseFloat(a.l);return i=0>i?0:i>360?360:~~i,j=0>j?0:j>1?1:parseFloat(j),k=0>k?0:k>1?1:parseFloat(k),0===j?c=d=e=k:(g=.5>k?k*(1+j):k+j-k*j,f=2*k-g,i/=360,h=i+1/3,c=~~(255*b(h)),h=i,d=~~(255*b(h)),h=i-1/3,e=~~(255*b(h))),{r:c,g:d,b:e}}function i(a){a=a||{r:255,g:0,b:0};var b,c,e,f="undefined"==typeof a.r?255:parseInt(a.r),g="undefined"==typeof a.g?0:parseInt(a.g),h="undefined"==typeof a.b?0:parseInt(a.b);f=0>f?0:f>255?255:~~f,g=0>g?0:g>255?255:~~g,h=0>h?0:h>255?255:~~h;var i=f/255,j=g/255,k=h/255,l=d.max(f,g,h),m=d.min(f,g,h),n=d.max(i,j,k),o=d.min(i,j,k);return e=(n+o)/2,l===m?(c=0,b=0):(c=.5>e?(n-o)/(n+o):(n-o)/(2-n-o),f===l?b=(j-k)/(n-o):g===l?b=2+(k-i)/(n-o):h===l&&(b=4+(i-j)/(n-o)),b*=60,0>b&&(b+=360),b=~~b),{h:b,s:c,l:e}}var j='<div class="hekr-color-picker"><div class="hekr-color-picker-state"><div class="hekr-color-picker-inner"><canvas class="hekr-color-picker-canvas"></canvas><div class="hekr-color-picker-shadow"></div><div class="hekr-color-picker-bulge"><div class="hekr-color-picker-semicircle"></div><div class="hekr-color-picker-mark"></div></div><div class="hekr-color-picker-highest"></div></div></div></div>',k=function(b,d){if(!(this instanceof k))return new k(b,d);this.ele=b,this.$ele=a(b),this.$doc=a(c);var e={disabled:!1,colors:{r:255,g:0,b:0},innerHTML:"",onStart:null,onChange:null,onFinish:null,onUpdate:null,startContext:b,changeContext:b,finishContext:b,updateContext:b};this.options=a.extend({},e,d),this._init()};k.prototype._init=function(){var a=this.options,b=this.disabled=a.disabled;this.oldColors={r:a.colors.r,g:a.colors.g,b:a.colors.b},this._append(),b?this._unbind():this._bind()},k.prototype._append=function(){var a=this.options,b=this.$ele;b.html(j);var c=this.$picker=b.find(".hekr-color-picker"),d=this.$state=c.find(".hekr-color-picker-state"),e=this.$inner=d.find(".hekr-color-picker-inner"),f=this.$canvas=e.find(".hekr-color-picker-canvas"),h=(this.$bulge=e.find(".hekr-color-picker-bulge"),this.$highest=e.find(".hekr-color-picker-highest")),i=c.width();this.center=i/2;var k=f.get(0),l=this.ctx=k.getContext("2d"),m=this.size=f.width(),n=this.radius=m/2;f.attr({width:m,height:m}),l.save(),l.translate(n,n),l.scale(n,n);for(var o=720;o--;)l.fillStyle="hsl("+o+", 100%, 50%)",l.beginPath(),l.moveTo(0,0),l.arc(0,0,1,g(o-.5),g(o+.5)),l.closePath(),l.fill();l.restore(),"string"==typeof a.innerHTML&&h.html(a.innerHTML),this._setPosByRgb(a.colors)},k.prototype._setPosByCoor=function(a,b){a=parseInt(a,10),b=parseInt(b,10);var c,e=this.pickerOffset,g=this.center,h=g,i=g,j=a-e.left,k=b-e.top,l=d.sqrt((j-h)*(j-h)+(k-i)*(k-i)),m=j>=h?k>=i?1:4:k>=i?2:3;switch(m){case 1:c=d.asin(d.abs(k-i)/l);break;case 2:c=d.PI/2+d.asin(d.abs(j-h)/l);break;case 3:c=d.PI+d.asin(d.abs(k-i)/l);break;case 4:c=3*d.PI/2+d.asin(d.abs(j-h)/l)}var n=f(c);this._setPosByHsl({h:n})},k.prototype._setPosByHsl=function(a){var b=this.$state,c=this.$bulge;a=a||{h:0};var d=a.h||0,e=0>d?0:d>360?360:~~d,f="rotate("+e+"deg)",g=h({h:e,s:1,l:.5}),i="rgb("+g.r+", "+g.g+", "+g.b+")";c.css("transform",f),b.css("background",i),this.colors=g},k.prototype._setPosByRgb=function(a){var b=i(a);this._setPosByHsl(b)},k.prototype._bind=function(){this.$picker.off(".colorPicker").on("touchstart.colorPicker",a.proxy(this._start,this)).removeClass("hekr-color-picker-disabled")},k.prototype._unbind=function(){this.$picker.off(".colorPicker").addClass("hekr-color-picker-disabled")},k.prototype._start=function(b){var c=b.currentTarget,d=this.$picker,e=d.index(c);if(-1!==e){var f=this.$doc,g=b.touches[0],h=this.options;this.pickerOffset=this.$picker.offset(),this._setPosByCoor(g.pageX,g.pageY),f.off(".colorPicker").on("touchmove.colorPicker",a.proxy(this._move,this)).on("touchend.colorPicker touchcancel.colorPicker",a.proxy(this._end,this)),a.isFunction(h.onStart)&&h.onStart.call(h.startContext,{disabled:!!this.disabled,colors:this.colors})}},k.prototype._move=function(a){a.preventDefault();var b=a.touches[0];this._setPosByCoor(b.pageX,b.pageY)},k.prototype._end=function(b){var c=this.options,d=this.oldColors,e=this.colors;d.r===e.r&&d.g===e.g&&d.b===e.b||(a.isFunction(c.onChange)&&c.onChange.call(c.changeContext,{disabled:!!this.disabled,colors:this.colors}),d.r=e.r,d.g=e.g,d.b=e.b),a.isFunction(c.onFinish)&&c.onFinish.call(c.finishContext,{disabled:!!this.disabled,colors:this.colors}),this.$doc.off(".colorPicker")},k.prototype.getValues=function(){return{disabled:!!this.disabled,colors:this.colors}},k.prototype.enable=function(){this.disabled=!1,this.options.disabled=!1,this._bind()},k.prototype.disable=function(){this.disabled=!0,this.options.disabled=!0,this._unbind()},k.prototype.update=function(b){a.extend(this.options,b),this._init();var c=this.options;a.isFunction(c.onUpdate)&&c.onUpdate.call(c.updateContext,{disabled:!!this.disabled,colors:this.colors})},a.fn.hekrColorPicker=function(b){return this.each(function(){a.data(this,"hekrColorPicker")||a.data(this,"hekrColorPicker",new k(this,b))})}}(a,window,document,Math)});