/*!
 * hi v2.0.0 (http://www.hekr.me/)
 * Copyright 2015-2016 杭州第九区科技有限公司
 */
!function(a){var b="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global;if("function"==typeof define&&define.amd)define(["jquery","underscore","exports"],function(c,d,e){b.HI=a(b,c,d,e)});else if("undefined"!=typeof exports){var c,d=require("underscore");try{c=require("jquery")}catch(e){}a(b,c,d,exports)}else b.HI=a(b,b.jQuery||b.$,b._,{})}(function(a,b,c,d){"use strict";document.body.addEventListener("touchstart",function(){});var e=a.HI;return d.VERSION="2.0.0",d.$=b,d._=c,d.noConflict=function(){return a.HI=e,this},function(a,b){function c(a,b,c){var d=l[b.type]||{};return null==a?c||!b.def?null:b.def:(a=d.floor?~~a:parseFloat(a),isNaN(a)?b.def:d.mod?(a+d.mod)%d.mod:0>a?0:d.max<a?d.max:a)}function d(b){var c=j(),d=c._rgba=[];return b=b.toLowerCase(),o(i,function(a,e){var f,g=e.re.exec(b),h=g&&e.parse(g),i=e.space||"rgba";return h?(f=c[i](h),c[k[i].cache]=f[k[i].cache],d=c._rgba=f._rgba,!1):void 0}),d.length?("0,0,0,0"===d.join()&&a.extend(d,f.transparent),c):f[b]}function e(a,b,c){return c=(c+1)%1,1>6*c?a+(b-a)*c*6:1>2*c?b:2>3*c?a+(b-a)*(2/3-c)*6:a}var f,g="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",h=/^([\-+])=\s*(\d+\.?\d*)/,i=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[a[1],a[2],a[3],a[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[2.55*a[1],2.55*a[2],2.55*a[3],a[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(a){return[a[1],a[2]/100,a[3]/100,a[4]]}}],j=a.Color=function(b,c,d,e){return new a.Color.fn.parse(b,c,d,e)},k={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},l={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},m=j.support={},n=a("<p>")[0],o=a.each;n.style.cssText="background-color:rgba(1,1,1,.5)",m.rgba=n.style.backgroundColor.indexOf("rgba")>-1,o(k,function(a,b){b.cache="_"+a,b.props.alpha={idx:3,type:"percent",def:1}}),j.fn=a.extend(j.prototype,{parse:function(e,g,h,i){if(e===b)return this._rgba=[null,null,null,null],this;(e.jquery||e.nodeType)&&(e=a(e).css(g),g=b);var l=this,m=a.type(e),n=this._rgba=[];return g!==b&&(e=[e,g,h,i],m="array"),"string"===m?this.parse(d(e)||f._default):"array"===m?(o(k.rgba.props,function(a,b){n[b.idx]=c(e[b.idx],b)}),this):"object"===m?(e instanceof j?o(k,function(a,b){e[b.cache]&&(l[b.cache]=e[b.cache].slice())}):o(k,function(b,d){var f=d.cache;o(d.props,function(a,b){if(!l[f]&&d.to){if("alpha"===a||null==e[a])return;l[f]=d.to(l._rgba)}l[f][b.idx]=c(e[a],b,!0)}),l[f]&&a.inArray(null,l[f].slice(0,3))<0&&(l[f][3]=1,d.from&&(l._rgba=d.from(l[f])))}),this):void 0},is:function(a){var b=j(a),c=!0,d=this;return o(k,function(a,e){var f,g=b[e.cache];return g&&(f=d[e.cache]||e.to&&e.to(d._rgba)||[],o(e.props,function(a,b){return null!=g[b.idx]?c=g[b.idx]===f[b.idx]:void 0})),c}),c},_space:function(){var a=[],b=this;return o(k,function(c,d){b[d.cache]&&a.push(c)}),a.pop()},transition:function(a,b){var d=j(a),e=d._space(),f=k[e],g=0===this.alpha()?j("transparent"):this,h=g[f.cache]||f.to(g._rgba),i=h.slice();return d=d[f.cache],o(f.props,function(a,e){var f=e.idx,g=h[f],j=d[f],k=l[e.type]||{};null!==j&&(null===g?i[f]=j:(k.mod&&(j-g>k.mod/2?g+=k.mod:g-j>k.mod/2&&(g-=k.mod)),i[f]=c((j-g)*b+g,e)))}),this[e](i)},blend:function(b){if(1===this._rgba[3])return this;var c=this._rgba.slice(),d=c.pop(),e=j(b)._rgba;return j(a.map(c,function(a,b){return(1-d)*e[b]+d*a}))},toRgbaString:function(){var b="rgba(",c=a.map(this._rgba,function(a,b){return null==a?b>2?1:0:a});return 1===c[3]&&(c.pop(),b="rgb("),b+c.join()+")"},toHslaString:function(){var b="hsla(",c=a.map(this.hsla(),function(a,b){return null==a&&(a=b>2?1:0),b&&3>b&&(a=Math.round(100*a)+"%"),a});return 1===c[3]&&(c.pop(),b="hsl("),b+c.join()+")"},toHexString:function(b){var c=this._rgba.slice(),d=c.pop();return b&&c.push(~~(255*d)),"#"+a.map(c,function(a){return a=(a||0).toString(16),1===a.length?"0"+a:a}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),j.fn.parse.prototype=j.fn,k.hsla.to=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b,c,d=a[0]/255,e=a[1]/255,f=a[2]/255,g=a[3],h=Math.max(d,e,f),i=Math.min(d,e,f),j=h-i,k=h+i,l=.5*k;return b=i===h?0:d===h?60*(e-f)/j+360:e===h?60*(f-d)/j+120:60*(d-e)/j+240,c=0===j?0:.5>=l?j/k:j/(2-k),[Math.round(b)%360,c,l,null==g?1:g]},k.hsla.from=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b=a[0]/360,c=a[1],d=a[2],f=a[3],g=.5>=d?d*(1+c):d+c-d*c,h=2*d-g;return[Math.round(255*e(h,g,b+1/3)),Math.round(255*e(h,g,b)),Math.round(255*e(h,g,b-1/3)),f]},o(k,function(d,e){var f=e.props,g=e.cache,i=e.to,k=e.from;j.fn[d]=function(d){if(i&&!this[g]&&(this[g]=i(this._rgba)),d===b)return this[g].slice();var e,h=a.type(d),l="array"===h||"object"===h?d:arguments,m=this[g].slice();return o(f,function(a,b){var d=l["object"===h?a:b.idx];null==d&&(d=m[b.idx]),m[b.idx]=c(d,b)}),k?(e=j(k(m)),e[g]=m,e):j(m)},o(f,function(b,c){j.fn[b]||(j.fn[b]=function(e){var f,g=a.type(e),i="alpha"===b?this._hsla?"hsla":"rgba":d,j=this[i](),k=j[c.idx];return"undefined"===g?k:("function"===g&&(e=e.call(this,k),g=a.type(e)),null==e&&c.empty?this:("string"===g&&(f=h.exec(e),f&&(e=k+parseFloat(f[2])*("+"===f[1]?1:-1))),j[c.idx]=e,this[i](j)))})})}),j.hook=function(b){var c=b.split(" ");o(c,function(b,c){a.cssHooks[c]={set:function(b,e){var f,g,h="";if("transparent"!==e&&("string"!==a.type(e)||(f=d(e)))){if(e=j(f||e),!m.rgba&&1!==e._rgba[3]){for(g="backgroundColor"===c?b.parentNode:b;(""===h||"transparent"===h)&&g&&g.style;)try{h=a.css(g,"backgroundColor"),g=g.parentNode}catch(i){}e=e.blend(h&&"transparent"!==h?h:"_default")}e=e.toRgbaString()}try{b.style[c]=e}catch(i){}}},a.fx.step[c]=function(b){b.colorInit||(b.start=j(b.elem,c),b.end=j(b.end),b.colorInit=!0),a.cssHooks[c].set(b.elem,b.start.transition(b.end,b.pos))}})},j.hook(g),a.cssHooks.borderColor={expand:function(a){var b={};return o(["Top","Right","Bottom","Left"],function(c,d){b["border"+d+"Color"]=a}),b}},f=a.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(b),function(a){a.easing.jswing=a.easing.swing,a.extend(a.easing,{def:"easeOutQuad",swing:function(b,c,d,e,f){return a.easing[a.easing.def](b,c,d,e,f)},easeInQuad:function(a,b,c,d,e){return d*(b/=e)*b+c},easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c},easeInOutQuad:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b+c:-d/2*(--b*(b-2)-1)+c},easeInCubic:function(a,b,c,d,e){return d*(b/=e)*b*b+c},easeOutCubic:function(a,b,c,d,e){return d*((b=b/e-1)*b*b+1)+c},easeInOutCubic:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b+c:d/2*((b-=2)*b*b+2)+c},easeInQuart:function(a,b,c,d,e){return d*(b/=e)*b*b*b+c},easeOutQuart:function(a,b,c,d,e){return-d*((b=b/e-1)*b*b*b-1)+c},easeInOutQuart:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b+c:-d/2*((b-=2)*b*b*b-2)+c},easeInQuint:function(a,b,c,d,e){return d*(b/=e)*b*b*b*b+c},easeOutQuint:function(a,b,c,d,e){return d*((b=b/e-1)*b*b*b*b+1)+c},easeInOutQuint:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b*b+c:d/2*((b-=2)*b*b*b*b+2)+c},easeInSine:function(a,b,c,d,e){return-d*Math.cos(b/e*(Math.PI/2))+d+c},easeOutSine:function(a,b,c,d,e){return d*Math.sin(b/e*(Math.PI/2))+c},easeInOutSine:function(a,b,c,d,e){return-d/2*(Math.cos(Math.PI*b/e)-1)+c},easeInExpo:function(a,b,c,d,e){return 0===b?c:d*Math.pow(2,10*(b/e-1))+c},easeOutExpo:function(a,b,c,d,e){return b===e?c+d:d*(-Math.pow(2,-10*b/e)+1)+c},easeInOutExpo:function(a,b,c,d,e){return 0===b?c:b===e?c+d:(b/=e/2)<1?d/2*Math.pow(2,10*(b-1))+c:d/2*(-Math.pow(2,-10*--b)+2)+c},easeInCirc:function(a,b,c,d,e){return-d*(Math.sqrt(1-(b/=e)*b)-1)+c},easeOutCirc:function(a,b,c,d,e){return d*Math.sqrt(1-(b=b/e-1)*b)+c},easeInOutCirc:function(a,b,c,d,e){return(b/=e/2)<1?-d/2*(Math.sqrt(1-b*b)-1)+c:d/2*(Math.sqrt(1-(b-=2)*b)+1)+c},easeInElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;return 0===b?c:1==(b/=e)?c+d:(g||(g=.3*e),h<Math.abs(d)?(h=d,f=g/4):f=g/(2*Math.PI)*Math.asin(d/h),-(h*Math.pow(2,10*(b-=1))*Math.sin((b*e-f)*(2*Math.PI)/g))+c)},easeOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;return 0===b?c:1==(b/=e)?c+d:(g||(g=.3*e),h<Math.abs(d)?(h=d,f=g/4):f=g/(2*Math.PI)*Math.asin(d/h),h*Math.pow(2,-10*b)*Math.sin((b*e-f)*(2*Math.PI)/g)+d+c)},easeInOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;return 0===b?c:2==(b/=e/2)?c+d:(g||(g=e*(.3*1.5)),h<Math.abs(d)?(h=d,f=g/4):f=g/(2*Math.PI)*Math.asin(d/h),1>b?-.5*(h*Math.pow(2,10*(b-=1))*Math.sin((b*e-f)*(2*Math.PI)/g))+c:h*Math.pow(2,-10*(b-=1))*Math.sin((b*e-f)*(2*Math.PI)/g)*.5+d+c)},easeInBack:function(a,b,c,d,e,f){return null==f&&(f=1.70158),d*(b/=e)*b*((f+1)*b-f)+c},easeOutBack:function(a,b,c,d,e,f){return null==f&&(f=1.70158),d*((b=b/e-1)*b*((f+1)*b+f)+1)+c},easeInOutBack:function(a,b,c,d,e,f){return null==f&&(f=1.70158),(b/=e/2)<1?d/2*(b*b*(((f*=1.525)+1)*b-f))+c:d/2*((b-=2)*b*(((f*=1.525)+1)*b+f)+2)+c},easeInBounce:function(b,c,d,e,f){return e-a.easing.easeOutBounce(b,f-c,0,e,f)+d},easeOutBounce:function(a,b,c,d,e){return(b/=e)<1/2.75?d*(7.5625*b*b)+c:2/2.75>b?d*(7.5625*(b-=1.5/2.75)*b+.75)+c:2.5/2.75>b?d*(7.5625*(b-=2.25/2.75)*b+.9375)+c:d*(7.5625*(b-=2.625/2.75)*b+.984375)+c},easeInOutBounce:function(b,c,d,e,f){return f/2>c?.5*a.easing.easeInBounce(b,2*c,0,e,f)+d:.5*a.easing.easeOutBounce(b,2*c-f,0,e,f)+.5*e+d}})}(jQuery),function(a){function b(a,b,c,d){return Math.abs(a-b)>=Math.abs(c-d)?a-b>0?"Left":"Right":c-d>0?"Up":"Down"}function c(){m=null,o.last&&(o.el.trigger("longTap"),o={})}function d(){m&&clearTimeout(m),m=null}function e(){j&&clearTimeout(j),k&&clearTimeout(k),l&&clearTimeout(l),m&&clearTimeout(m),j=k=l=m=null,o={}}function f(a){return("touch"==a.pointerType||a.pointerType==a.MSPOINTER_TYPE_TOUCH)&&a.isPrimary}function g(a,b){return a.type=="pointer"+b||a.type.toLowerCase()=="mspointer"+b}for(var h=["altKey","changedTouches","ctrlKey","metaKey","shiftKey","targetTouches","touches"],i=h.length;i--;)-1===a.event.props.indexOf(h[i])&&a.event.props.push(h[i]);var j,k,l,m,n,o={},p=750;a(document).ready(function(){var h,i,q,r,s=0,t=0;"MSGesture"in window&&(n=new MSGesture,n.target=document.body),a(document).bind("MSGestureEnd",function(a){var b=a.velocityX>1?"Right":a.velocityX<-1?"Left":a.velocityY>1?"Down":a.velocityY<-1?"Up":null;b&&(o.el.trigger("swipe"),o.el.trigger("swipe"+b))}).on("touchstart MSPointerDown pointerdown",function(b){(r=g(b,"down"))&&!f(b)||(q=r?b:b.touches[0],b.touches&&1===b.touches.length&&o.x2&&(o.x2=void 0,o.y2=void 0),h=Date.now(),i=h-(o.last||h),o.el=a("tagName"in q.target?q.target:q.target.parentNode),j&&clearTimeout(j),o.x1=q.pageX,o.y1=q.pageY,i>0&&250>=i&&(o.isDoubleTap=!0),o.last=h,m=setTimeout(c,p),n&&r&&n.addPointer(b.pointerId))}).on("touchmove MSPointerMove pointermove",function(a){(r=g(a,"move"))&&!f(a)||(q=r?a:a.touches[0],d(),o.x2=q.pageX,o.y2=q.pageY,s+=Math.abs(o.x1-o.x2),t+=Math.abs(o.y1-o.y2))}).on("touchend MSPointerUp pointerup",function(c){(r=g(c,"up"))&&!f(c)||(d(),o.x2&&Math.abs(o.x1-o.x2)>30||o.y2&&Math.abs(o.y1-o.y2)>30?l=setTimeout(function(){o.el.trigger("swipe"),o.el.trigger("swipe"+b(o.x1,o.x2,o.y1,o.y2)),o={}},0):"last"in o&&(30>s&&30>t?k=setTimeout(function(){var b=a.Event("tap");b.cancelTouch=e,o.el.trigger(b),o.isDoubleTap?(o.el&&o.el.trigger("doubleTap"),o={}):j=setTimeout(function(){j=null,o.el&&o.el.trigger("singleTap"),o={}},250)},0):o={}),s=t=0)}).on("touchcancel MSPointerCancel pointercancel",e),a(window).on("scroll",e)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(b){a.fn[b]=function(a){return this.on(b,a)}})}(b),d.UI=function(a,b,e,f){if(this!==d.UI||this instanceof d.UI)return d.UI.call(d.UI,a,b,e);var g=this.UIs,h=this.components,i=arguments.length;return 1===i&&c.isString(a)&&a&&c.has(g,a)&&g[a]?g[a]:i>=2&&c.isString(a)&&a&&(c.isObject(b)&&(f=e,e=b,b=a,a=c.isObject(h[b])&&c.isNumber(h[b].count)?b+h[b].count++:c.uniqueId(b)),c.isString(b)&&b&&c.has(h,b)&&c.isFunction(h[b].Builder)&&c.isNumber(h[b].count)&&(!c.has(g,a)||c.has(g,a)&&(!g[a]||f)))?(h[b].count++,g[a]=new h[b].Builder(e)):this},d.UI.rem=parseInt(document.documentElement.style.fontSize)||100,d.UI.dpr=window.devicePixelRatio,d.UI.components={},d.UI.UIs={},d.UI.addComponent=function(a,b,e){if(c.isString(a)&&a&&c.isFunction(b)){var f=d.UI.components;if(!c.has(f,a)||c.has(f,a)&&(!f[a]||e))return f[a]={Builder:b,count:0},d.UI[a.replace(/(\w)/,function(a){return a.toUpperCase()})]=b,b}return!1},d.UI.set=function(a,b,c,e){return d.UI(a,b,c,e)},d.UI.get=function(a){return d.UI(a)},d.UI.rename=function(a,b){var e=d.UI.UIs;if(c.has(e,a)&&!c.has(e,b)){e[b]=e[a];try{delete e[a]}catch(f){e[a]=void 0}return e[b]}return!1},d.UI.getUIs=function(){return d.UI.UIs},d.UI.getComponents=function(){return d.UI.components},function(a,b,c){var d='<div class="hi-confirm"><div class="hi-confirm-position"><div class="hi-confirm-inner"><div class="hi-confirm-content"><div class="hi-confirm-title <%= titleHide %>" style="color: <%= titleColor %>;"><%= titleText %></div><div class="hi-confirm-message" style="color: <%= messageColor %>;"><%= messageText %></div></div><div class="hi-confirm-buttons <%= btnType %>"><a href="javascript:;" class="hi-confirm-cancel" style="color: <%= cancelBtnColor %>;"><%= cancelBtnText %></a><a href="javascript:;" class="hi-confirm-confirm" style="color: <%= confirmBtnColor %>;"><%= confirmBtnText %></a></div></div></div></div>',e='<input type="text"><a href="javascript:;" class="hi-confirm-x">X</a>',f=function(c){if(!(this instanceof f))return new f(c);c=c||{};var g={titleText:"",titleColor:"#fff",messageText:"",messageColor:"#fff",btnType:"double",cancelBtnText:"取消",cancelBtnColor:"#fff",cancelBtnCallback:null,cancelBtnContext:this,confirmBtnText:"确定",confirmBtnColor:"#fff",confirmBtnCallback:null,confirmBtnContext:this,textarea:!1,autoHide:!1,duration:2e3},h=this.config=b.extend({},g,c),i=b.extend({},this.config);i.btnType="single"==h.btnType?"hi-confirm-single":"hi-confirm-double",i.titleHide=h.titleText?"":"hi-hide";var j=b.template(d),k=j(i),l=this.$confirm=a(k),m=l.find(".hi-confirm-content");this.$title=m.children(".hi-confirm-title");var n=this.$message=m.children(".hi-confirm-message");if(h.textarea){n.addClass("hi-confirm-input").html(e);var o=n.children("input");o.length&&(this.$input=o,this.$x=n.children(".hi-confirm-x"))}var p=this.$btns=l.find(".hi-confirm-buttons");this.$cancelBtn=p.children(".hi-confirm-cancel");this.$confirmBtn=p.children(".hi-confirm-confirm");var q=this.$body=a("body");return q.append(l),l.on("touchmove.confirm",function(a){a.preventDefault()}),this._bind(),this.show(),this};f.prototype._bind=function(){var c=this.config,d=this.$input,e=this.$x,f=this.$confirm,g=this.$confirmBtn,h=this.$cancelBtn;h.off(".confirm").on("tap.confirm",function(){var e=d?d.val():null;b.isFunction(c.cancelBtnCallback)&&c.cancelBtnCallback.call(c.cancelBtnContext,e),f.fadeOut("normal",a.proxy(function(){b.isUndefined(this.timer)||(clearTimeout(this.timer),this.timer=void 0)},this))}),g.off(".confirm").on("tap.confirm",function(e){var g=d?d.val():null;b.isFunction(c.confirmBtnCallback)&&c.confirmBtnCallback.call(c.confirmBtnContext,g),f.fadeOut("normal",a.proxy(function(){b.isUndefined(this.timer)||(clearTimeout(this.timer),this.timer=void 0)},this))}),this.$input&&(d.val(""),e.off(".confirm").on("tap.confirm",function(a){d.val("")}))},f.prototype.show=function(){var c=this.config,d=this.$confirm;b.isUndefined(this.timer)||(clearTimeout(this.timer),this.timer=void 0),d.fadeIn("normal","swing",a.proxy(function(){c.autoHide&&b.isNumber(c.duration)&&(this.timer=setTimeout(function(){d.fadeOut("normal")},c.duration))},this))},f.prototype.hide=function(){b.isUndefined(this.timer)||(clearTimeout(this.timer),this.timer=void 0),this.$confirm.fadeOut("normal")},f.prototype.update=function(a){if(b.extend(this.config,a),a=this.config,a.titleText?this.$title.removeClass("hi-hide").html(a.titleText).css("color",a.titleColor):this.$title.addClass("hi-hide"),a.textarea){this.$message.addClass("hi-confirm-input").html(e);var c=this.$message.children("input");c.length&&(this.$input=c,this.$x=this.$message.children(".hi-confirm-x"))}else this.$message.removeClass("hi-confirm-input").html(a.messageText).css("color",a.messageColor),this.$input=void 0,this.$x=void 0;"single"===a.btnType?this.$btns.removeClass("hi-confirm-double").addClass("hi-confirm-single"):this.$btns.removeClass("hi-confirm-single").addClass("hi-confirm-double"),this.$cancelBtn.html(a.cancelBtnText).css("color",a.cancelBtnColor),this.$confirmBtn.html(a.confirmBtnText).css("color",a.confirmBtnColor);this.$confirm;a.autoHide||b.isUndefined(this.timer)||(clearTimeout(this.timer),this.timer=void 0),this._bind()},c.UI.addComponent("confirm",f)}(b,c,d),function(a,b,c){var d='<div class="hi-toast"><div class="hi-toast-position"><div class="hi-toast-message"></div></div></div>',e=function(c){if(!(this instanceof e))return new e(c);c=c||{};var f={message:"",duration:2e3,keep:!1},g=(this.config=b.extend({},f,c),this.$toast=a(d)),h=this.$message=g.find(".hi-toast-message");h.html(c.message);var i=a("body");return i.append(g),g.on("touchmove.toast",function(a){a.preventDefault(),a.stopPropagation()}),c.keep||g.on("tap.toast",a.proxy(this.hide,this)),this.show(),this};e.prototype.show=function(){var a=this.config,c=this.$toast,d=this;b.isUndefined(this.timer)||(clearTimeout(this.timer),this.timer=void 0),c.fadeIn("normal","swing",function(){b.isNumber(a.duration)&&a.duration>=0&&(d.timer=setTimeout(function(){c.fadeOut("normal")},a.duration))})},e.prototype.hide=function(){b.isUndefined(this.timer)||(clearTimeout(this.timer),this.timer=void 0),this.$toast.fadeOut("normal")},e.prototype.update=function(c){c=c||{},b.extend(this.config,c),c=this.config;var d=this.$toast,e=this.$message;e.html(c.message),(!b.isNumber(c.duration)||c.duration<0)&&(b.isUndefined(this.timer)||(clearTimeout(this.timer),this.timer=void 0)),c.keep?d.off("tap.toast"):d.on("tap.toast",a.proxy(this.hide,this)),this.show()},c.UI.addComponent("toast",e)}(b,c,d),function(a,b,c){var d='<div class="hi-switches"></div>',e='<label class="hi-switches-label"></label>',f=function(c){if(!(this instanceof f))return new f(c);c=c||{};var g=c.hook,h=this.$hook=a(g),i={};if(!(g&&h&&h.length&&h.is("input")&&"checkbox"===h.get(0).type.toLowerCase()))return console.warn('钩子元素必须是 input[type="checkbox"] 元素'),this;i.disabled="true"===h.attr("data-disabled")||"disabled"===h.attr("data-disabled")||h.is(":disabled"),i.checked="true"===h.attr("data-checked")||"checked"===h.attr("data-checked")||h.is(":checked"),i.value=h.attr("data-value")||h.val()||"on";var j={onStart:null,startContext:this,onChange:null,changeContext:this,onFinish:null,finishContext:this,onUpdate:null,updateContext:this},k=this.config=b.extend({},j,i,c),l=this.value=k.value,m=this.disabled=k.disabled,n=this.checked=this._checked=k.checked,o=this.onColor={r:127,g:216,b:129};this.offColor={r:215,g:215,b:215},this.speed=150,h.addClass("hi-switches-checkbox").val(l).attr({disabled:m,checked:n}),h.wrap(e);var p=this.$label=h.parent();p.wrap(d);var q=this.$switches=p.parent(),r=this.switchesWidth=q.width(),s=this.labelWidth=p.outerWidth(),t=p.position().left,u=(this.minPosLeft=t,this.maxPosLeft=r-s-t);return n&&(p.css("left",u+"px"),q.css("backgroundColor","rgb("+o.r+", "+o.g+", "+o.b+")"),h.attr("checked","checked")),m?q.addClass("hi-switches-disabled"):this._bind(),this};f.prototype._bind=function(){this.$switches.off(".switches").on("touchstart.switches",a.proxy(this._start,this))},f.prototype._unbind=function(){this.$switches.off(".switches")},f.prototype._start=function(c){var d=this.config,e=this.$switches,f=this.$label,g=c.target,h=a(g);if(h.is(f)){var i=e.offset().left,j=parseInt(e.css("borderLeftWidth"),10);this.moveMin=i+j,this.moveMax=this.moveMin+this.switchesWidth-this.labelWidth,e.on("touchmove.switches",a.proxy(this._move,this))}this.startTouches={pageX:c.touches[0].pageX,timeStamp:c.timeStamp},e.on("touchend.switches touchcancel.switches",a.proxy(this._end,this)),b.isFunction(d.onStart)&&d.onStart.call(d.startContext,{value:this.value,disabled:this.disabled,checked:this.checked})},f.prototype._move=function(a){var b=(this.config,this.$switches),c=this.$label,d=this.onColor,e=this.offColor,f=this.labelWidth,g=this.moveMin,h=this.moveMax,i=a.touches[0].pageX-f/2;i=g>i?0:i>h?h-g:i-g,c.css("left",i+"px");var j=Math.round((d.r-e.r)/(h-g)*i+e.r),k=Math.round((d.g-e.g)/(h-g)*i+e.g),l=Math.round((d.b-e.b)/(h-g)*i+e.b);b.css("backgroundColor","rgb("+j+", "+k+", "+l+")"),this.moveTouches={pageX:a.touches[0].pageX,timeStamp:a.timeStamp}},f.prototype._end=function(a){var c,d=(this.config,this.$switches),e=this.$label,f=this.startTouches,g=this.moveTouches;if(b.isUndefined(g))c=!this.checked;else{var h=f.pageX,i=f.timeStamp,j=g.pageX,k=g.timeStamp;c=300>k-i&&255>(j-h)*(j-h)?!this.checked:e.position().left>(this.maxPosLeft+this.minPosLeft)/2}this._switch(c,this._cb),this.startTouches=void 0,this.moveTouches=void 0,d.off("touchmove.switches touchend.switches touchcancel.switches")},f.prototype._switch=function(c,d){var e=this.$switches,f=this.$label,g=this.$hook,h=this.speed,i=this.minPosLeft,j=this.maxPosLeft,k=this.onColor,l=this.offColor;f.stop(!0,!0),e.stop(!0,!0),c?(f.animate({left:j+"px"},h,"swing",a.proxy(function(){this.checked=!0,b.isFunction(d)&&d.call(this),g.attr("checked","checked")},this)),e.animate({backgroundColor:"rgb("+k.r+", "+k.g+", "+k.b+")"},h)):(f.animate({left:i+"px"},h,"swing",a.proxy(function(){this.checked=!1,b.isFunction(d)&&d.call(this),g.removeAttr("checked")},this)),e.animate({backgroundColor:"rgb("+l.r+", "+l.g+", "+l.b+")"},h))},f.prototype._cb=function(){var a=this.config;this.checked!==this._checked&&b.isFunction(a.onChange)&&a.onChange.call(a.changeContext,{value:this.value,disabled:this.disabled,checked:this.checked}),b.isFunction(a.onFinish)&&a.onFinish.call(a.finishContext,{value:this.value,disabled:this.disabled,checked:this.checked}),this._checked=this.checked},f.prototype.show=function(){return this.$switches.css("display","inline-block"),this},f.prototype.hide=function(){return this.$switches.hide(),this},f.prototype.getValue=function(){return this.value},f.prototype.setValue=function(a){return a=a||"on",a=a.toString(),this.$hook.val(a),this.value=a,this},f.prototype.isChecked=function(){return this.checked},f.prototype.isDisabled=function(){return this.disabled},f.prototype.enable=function(){return this.$switches.removeClass("hi-switches-disabled"),this._bind(),this.disabled=!1,this.$hook.removeAttr("disabled"),this},f.prototype.disable=function(){return this.$switches.addClass("hi-switches-disabled"),this._unbind(),this.disabled=!0,this.$hook.attr("disabled","disabled"),this},f.prototype.update=function(a){a=a||{};var c=a.checked,d=a.value,e=a.disabled,f=this.config;return b.isBoolean(c)&&this.checked!==c&&(this._checked=f.checked=c,this._switch(c)),null===d&&void 0===d||(f.value=d,this.setValue(d)),b.isBoolean(e)&&this.disabled!==e&&(f.disabled=e,e?this.disable():this.enabled()),b.each(["onStart","startContext","onChange","changeContext","onFinish","finishContext","onUpdate","updateContext"],function(b){void 0!==a[b]&&a[b]!==f[b]&&(f[b]=a[b])},this),b.isFunction(f.onUpdate)&&f.onUpdate.call(f.updateContext,{value:this.value,disabled:this.disabled,checked:this.checked}),this},c.UI.addComponent("switches",f)}(b,c,d),function(a,b,c){var d='<div class="hi-groove"><div class="hi-groove-scroller"><%= circles %><%= rects %><%= slider %></div><div class="hi-groove-labels"><%= lables %></div></div>',e='<div class="hi-groove-circle">&bull;</div>',f='<div class="hi-groove-rect"></div>',g='<div class="hi-groove-slider" style="width: <%= size %>; height: <%= size %>; line-height: <%= size %>; display: <%= init %>;"><%= icon %></div>',h='<div class="hi-groove-label"><%= label %></div>',i=function(c){if(!(this instanceof i))return new i(c);c=c||{};var d,e={},f=c.hook,g=this.$hook=a(f);if(!(f&&g&&g.length))return console.warn("钩子元素不存在"),this;if(d=this.hookWidth=g.width(),!(d&&d>0))return console.warn("钩子元素的宽度不能为零"),this;e.disabled="true"===g.attr("data-disabled")||"disabled"===g.attr("data-disabled")||g.is(":disabled"),e.options=g.attr("data-options")?g.attr("data-options").split(","):[],e.labels=g.attr("data-labels")?g.attr("data-labels").split(","):[],e.value=g.attr("data-value")?a.trim(g.attr("data-value")):null,e.ratios=g.attr("data-ratios")?g.attr("data-ratios").split(","):null;var h={onStart:null,startContext:this,onChange:null,changeContext:this,onFinish:null,finishContext:this,onUpdate:null,updateContext:this,slider:{init:!0,icon:"&bull;",size:"32px"}};this.config=b.extend({},h,e,c);return this.speed=150,this._init()};i.prototype._init=function(){var c,i=this.config,j=this.$hook,k=this.hookWidth;if(!(b.isArray(i.options)&&i.options.length>=2))return console.log("配置项options必须是一个长度大于或等于2的数组"),this;if(c=this.optionsLength=i.options.length,b.map(i.options,function(b){return a.trim(String(b))}),i.labels||b.isArray(i.labels)){var l=i.labels.length;if(c>l)for(var m=l;c>m;m++)i.labels[m]=""}else i.labels=i.options;if(i.ratios||b.isArray(i.ratios)){b.map(i.ratios,function(a){return a=Number(a),b.isNaN(a)?1:a});var n=i.ratios.length;if(c-1>n)for(var o=n;c-1>o;o++)i.ratios[o]=1}else{i.ratios=[];for(var p=0;c-1>p;p++)i.ratios[p]=1}var q=this.value=this._value=null!==i.value&&void 0!==i.value?a.trim(String(i.value)):i.options[0],r=this.disabled=!!i.disabled;i.slider||(i.slider={}),null==i.slider.init&&(i.slider.init=!0),null==i.slider.size&&(i.slider.size="32px"),null==i.slider.icon&&(i.slider.icon="&bull;");for(var s=b.template(g),t=s({init:i.slider.init?"block":"none",size:i.slider.size,icon:i.slider.icon}),u=b.template(h),v="",w="",x="",y=0;c>y;y++)v+=e,y!==c-1&&(w+=f),x+=u({label:i.labels[y]});var z=b.template(d),A=z({circles:v,rects:w,slider:t,lables:x});j.html(A);var B=this.$groove=j.children(".hi-groove"),C=this.$scroller=B.children(".hi-groove-scroller"),D=this.$circles=C.children(".hi-groove-circle"),E=this.$rects=C.children(".hi-groove-rect"),F=this.$slider=C.children(".hi-groove-slider"),G=B.children(".hi-groove-labels").eq(0).children(".hi-groove-label"),H=this.grooveWidth=k;B.width(H);var I=this.sliderWidth=F.outerHeight(),J=this.circleWidth=D.outerHeight(),K=this.scrollerHeight=Math.max(I,J);C.height(K);for(var L,M,N,O,P=b.reduce(i.ratios,function(a,b){return a+b}),Q=1,R=H-c*J+(c-1)*Q*2,S=(I-J)/2,T=this.$rects.height(),U=K/2-T/2,V=[],W=[],X=[],Y=[],Z=0;c>Z;Z++){if(c-1>Z){if(L=i.ratios[Z]/P*R,W[Z]=L,Z-1>-1){for(var $=0,_=0;Z>_;_++)$+=W[_];M=$+J*(Z+1)-2*Q*(Z+1)+Q,N=$+J*Z-2*Q*Z}else M=J-Q,N=0;X[Z]=M,E.eq(Z).css({width:L+"px",left:M+"px",top:U+"px"})}else N=N+W[Z-1]+J-Q;V[Z]=N-(I-J)/2,D.eq(Z).css({left:N+"px",top:S+"px"}),O=N-(G.eq(Z).outerWidth()-J)/2,G.eq(Z).css({left:O+"px",top:(I-J)/2+"px"}),Y[Z]=Z-1>-1?V[Z-1]+(N-V[Z-1])/2+I/2:-(I-J)/2}Y[Z]=H+(I-J)/2;var aa=a.inArray(q,i.options);return i.slider.init&&aa>-1&&F.css({left:V[aa]+"px"}),this.sliderRange=Y,this.circlesLeft=V,r?B.addClass("hi-groove-disabled"):this._bind(),this},i.prototype._bind=function(){this.$scroller.off(".groove").on("touchstart.groove",a.proxy(this._start,this))},i.prototype._unbind=function(){this.$scroller.off(".groove")},i.prototype._start=function(c){var d=this.config,e=this.$scroller,f=this.$slider,g=this.sliderWidth,h=this.circleWidth,i=this.grooveWidth,j=this.startTouches=c.touches[0],k=this.min=-(g-h)/2,l=this.max=i-g+(g-h)/2,m=this.scrollerPosLeft=e.offset().left,n=j.pageX-m-g/2;f.stop(!0,!0),f.is(":visible")||f.show(),n=k>n?k:n>l?l:n,f.css("left",n+"px"),e.on("touchmove.groove",a.proxy(this._move,this)).on("touchend.groove touchcancel.groove",a.proxy(this._end,this)),b.isFunction(d.onStart)&&d.onStart.call(d.startContext,{disabled:Boolean(this.disabled),value:this.value})},i.prototype._move=function(a){a.preventDefault(),a.stopPropagation();var b=this.moveTouches=a.touches[0],c=this.$slider,d=this.sliderWidth,e=this.scrollerPosLeft,f=this.min,g=this.max,h=b.pageX-e-d/2;h=f>h?f:h>g?g:h,c.css("left",h+"px")},i.prototype._end=function(a){var c=this.config,d=this.$scroller,e=this.$slider,f=this.moveTouches?this.moveTouches.pageX:this.startTouches.pageX,g=this.min,h=this.max,i=this.scrollerPosLeft,j=this.sliderWidth,k=f-i-j/2,l=this.sliderRange,m=this.circlesLeft,n=this.speed,o=l.length,p=0;for(k=g>k?g:k>h?h:k;o--;)if(k+j/2<=l[o]&&k+j/2>=l[o-1]){p=o-1;break}e.animate({left:m[p]+"px"},n),this.value=c.options[p],this.value!==this._value&&(b.isFunction(c.onChange)&&c.onChange.call(c.changeContext,{disabled:Boolean(this.disabled),value:this.value}),this._value=this.value),b.isFunction(c.onFinish)&&c.onFinish.call(c.finishContext,{disabled:Boolean(this.disabled),value:this.value}),this.startTouches=null,this.moveTouches=null,d.off("touchmove.groove touchcancel.groove touchend.groove")},i.prototype.show=function(){return this.$hook.show(),this},i.prototype.hide=function(){return this.$hook.hide(),this},i.prototype.getValue=function(){return this.value},i.prototype.setValue=function(b){b=a.trim(String(b));var c=this.config.options,d=this.circlesLeft,e=this.$slider,f=this.speed,g=a.inArray(b,c);return g>-1&&(this.value=this._value=b,e.animate({left:d[g]+"px"},f)),this},i.prototype.isDisabled=function(){return this.disabled},i.prototype.disable=function(){return this.disabled=!0,this._unbind(),this.$groove.addClass("hi-groove-disabled"),this},i.prototype.enable=function(){return this.disabled=!1,this._bind(),this.$groove.removeClass("hi-groove-disabled"),this},i.prototype.update=function(a){a=a||{},b.extend(this.config,a);var c=this.config,d=this._init();return b.isFunction(c.onUpdate)&&c.onUpdate.call(c.updateContext,{value:this.value,disabled:this.disabled}),d},c.UI.addComponent("groove",i)}(b,c,d),function(a,b,c){var d='<div class="hi-carousel"><div class="hi-carousel-viewport"><div class="hi-carousel-scroller"></div></div><div class="hi-carousel-nav"><%= labels %></div></div>',e='<div class="hi-carousel-label"></div>',f='<div class="hi-carousel-label hi-carousel-label-active"></div>',g=b.template(d),h=function(c){if(!(this instanceof h))return new h(c);c=c||{};var d,i={},j=c.hook,k=this.$hook=a(j);if(!(j&&k&&k.length))return console.warn("钩子元素不存在"),this;if(d=this.hookWidth=k.width(),!(d&&d>0))return console.warn("钩子元素的宽度不能为零"),this;i.disabled="true"===k.attr("data-disabled")||"disabled"===k.attr("data-disabled")||!1,i.items=k.attr("data-items")?k.attr("data-items").split(","):[],i.value=k.attr("data-value")?a.trim(k.attr("data-value")):null,i.manualPlay="true"===k.attr("data-manual-play")||!1,i.dropNav="true"===k.attr("data-drop-nav")||!1,i.duration=b.isNaN(parseInt(k.attr("data-duration"),10))?3e3:parseInt(k.attr("data-duration"),10),i.speed=b.isNaN(parseInt(k.attr("data-speed"),10))?300:parseInt(k.attr("data-speed"),10),i.minMoveX=b.isNaN(parseInt(k.attr("data-min-move-x"),10))?50:parseInt(k.attr("data-min-move-x"),10);var l={disabled:!1,manualPlay:!1,duration:3e3,speed:300,dropNav:!1,minMoveX:50},m=this.config=b.extend({},l,i,c),n=this.items=m.items,o=this.$itemsArr=[];
if(!b.isArray(n)||!n.length)return console.warn("items 配置必须是一个长度不为零的数组"),this;b.each(n,function(b,c){var d=a(b),e=d.length;if(e)if(e>1)for(var f=0;e>f;f++)d.eq(f).is(":visible")&&o.push(d.eq(f));else d.is(":visible")&&o.push(d.eq(0))},this);var p=this.itemsLength=o.length;if(!p)return console.warn("items 配置中必须含有页面中可见的元素"),this;var q;if(null!=m.value)if(q=parseInt(m.value,10),b.isNumber(q)&&!b.isNaN(q))q>0&&p>q?this.activeItemIndex=q:q=null;else if("string"==typeof m.value){q=a(m.value);for(var r,s=0;p>s;s++)if(o[s].is(q.get(0))){this.activeItemIndex=s,r=o[s];break}r&&(q=null)}else q=null;null==q&&(m.value=0,this.activeItemIndex=0);for(var t=this.disabled=!!m.disabled,u=this.manualPlay=!!m.manualPlay,v=(this.duration=b.isNaN(parseInt(m.duration))?3e3:parseInt(m.duration),this.speed=b.isNaN(parseInt(m.speed))?300:parseInt(m.speed),this.dropNav=!!m.dropNav),w=(this.minMoveX=b.isNaN(parseInt(m.minMoveX))?50:parseInt(m.minMoveX),""),x=0;p>x;x++)w+=x===this.activeItemIndex?f:e;var y=g({labels:w}),z=this.$carousel=a(y);z.width(d);var A=this.$viewport=z.children(".hi-carousel-viewport");A.width(d);var B=this.$scroller=A.children(".hi-carousel-scroller");B.width(d*p);var C=this.$nav=z.children(".hi-carousel-nav"),D=(this.$labels=C.children(".hi-carousel-label"),100/p+"%"),E=this.$items=b.reduce(o,function(a,b){return b.addClass("hi-carousel-item").css("width",D).detach(),a?a.add(b.get(0)):b},null,this);B.html(E),k.html(z);this.scrollerLeft=-d*this.activeItemIndex;v&&C.hide(),t||this._bind(),u||this._timming()};h.prototype._bind=function(){this.$viewport.off(".carousel").on("touchstart.carousel",a.proxy(this._start,this))},h.prototype._unbind=function(){this.$viewport.off(".carousel")},h.prototype._start=function(b){var c=this.$viewport;c.stop(!0,!0),this.manualPlay||clearTimeout(this.timer),this.startPageX=b.touches[0].pageX,c.on("touchmove.carousel",a.proxy(this._move,this)).on("touchend.carousel touchcancel.carousel",a.proxy(this._end,this))},h.prototype._move=function(a){a.preventDefault(),a.stopPropagation();var b=this.movePageX=a.touches[0].pageX,c=this.startPageX,d=this.$scroller,e=b-c,f=this.scrollerLeft;d.css("margin-left",f+e+"px")},h.prototype._end=function(b){var c=this.$scroller,d=this.$viewport,e=(this.config,this.minMoveX),f=this.scrollerLeft,g=this.activeItemIndex,h=this.hookWidth,i=this.speed,j=this.itemsLength,k=this.startPageX,l=this.movePageX,m=l-k;Math.abs(m)>=e?0>m?g+1>=j?c.animate({marginLeft:f+"px"},i):c.animate({marginLeft:(this.scrollerLeft-=h)+"px"},i,"swing",a.proxy(function(){this.$labels.filter(".hi-carousel-label-active").removeClass("hi-carousel-label-active"),this.$labels.eq(++this.activeItemIndex).addClass("hi-carousel-label-active")},this)):0>=g?c.animate({marginLeft:f+"px"},i):c.animate({marginLeft:(this.scrollerLeft+=h)+"px"},i,"swing",a.proxy(function(){this.$labels.filter(".hi-carousel-label-active").removeClass("hi-carousel-label-active"),this.$labels.eq(--this.activeItemIndex).addClass("hi-carousel-label-active")},this)):c.animate({marginLeft:f+"px"},this.speed),d.off("touchmove.carousel touchend.carousel touchcancel.carousel"),this.manualPlay||this._timming()},h.prototype._timming=function(){this.timer=setTimeout(a.proxy(function(){this._play()},this),this.duration)},h.prototype._play=function(){var a=!(this.activeItemIndex+1<this.itemsLength);a?this._reversePlay():this._orderlyPlay(),this._timming()},h.prototype._orderlyPlay=function(){var b=this.$scroller,c=this.speed,d=this.hookWidth;b.animate({marginLeft:(this.scrollerLeft-=d)+"px"},c,"swing",a.proxy(function(){var a=this.$labels;a.filter(".hi-carousel-label-active").removeClass("hi-carousel-label-active"),a.eq(++this.activeItemIndex).addClass("hi-carousel-label-active")},this))},h.prototype._reversePlay=function(){this.$scroller.animate({marginLeft:0},this.speed,"swing",a.proxy(function(){var a=this.$labels;a.filter(".hi-carousel-label-active").removeClass("hi-carousel-label-active"),a.eq(0).addClass("hi-carousel-label-active"),this.activeItemIndex=0,this.scrollerLeft=0},this))},h.prototype.show=function(){return this.$hook.show(),this},h.prototype.hide=function(){return this.$hook.hide(),this},h.prototype.play=function(){return this.manualPlay=!1,clearTimeout(this.timer),this._timming(),this},h.prototype.stop=function(){return this.manualPlay=!0,clearTimeout(this.timer),this},h.prototype.getValue=function(){return{disabled:this.disabled,index:this.activeItemIndex,dom:this.$itemsArr[this.activeItemIndex].get(0)}},h.prototype.setValue=function(c){if(null!=c){var d,e=parseInt(c,10);if(b.isNaN(e)?"string"==typeof c&&(d=this.$items.index(a(c).get(0))):d=e<this.itemsLength?e:-1,-1!==d){var f=this.$scroller,g=this.speed,h=this.hookWidth;this.scrollerLeft=-h*d,this.activeItemIndex=d,this.config.value=c,f.animate({marginLeft:this.scrollerLeft+"px"},g,"swing",a.proxy(function(){var a=this.$labels;a.filter(".hi-carousel-label-active").removeClass("hi-carousel-label-active"),a.eq(d).addClass("hi-carousel-label-active")},this))}}return this},h.prototype.isDisabled=function(){return this.disabled},h.prototype.disable=function(){return this.disabled=!0,this._unbind(),this},h.prototype.enable=function(){return this.disabled=!1,this._bind(),this},c.UI.addComponent("carousel",h)}(b,c,d),function(a,b,c){var d=c.UI.dpr||window.devicePixelRatio||1,e=function(c){if(!(this instanceof e))return new e(c);c=c||{};var d,f,g={},h=c.hook,i=this.$hook=a(h);if(!(h&&i&&i.length&&i.is(":visible")))return console.warn("钩子元素不合法"),this;if(d=this.hookWidth=i.width(),f=this.hookHeight=i.height(),!(d&&d>0&&f&&f>0))return console.warn("钩子元素的宽度或高度不能为零"),this;g.background=i.attr("data-background")||"rgba(0, 0, 0, 0.25)",g.color=i.attr("data-color")||"#13b5b1",g.width=b.isNaN(parseInt(i.attr("data-width")))?10:parseInt(i.attr("data-width")),g.gutter=b.isNaN(parseInt(i.attr("data-gutter")))?10:parseInt(i.attr("data-gutter")),g.beginAngle=b.isNaN(parseFloat(i.attr("data-begin-angle")))?Math.PI/2:parseFloat(i.attr("data-begin-angle")),g.min=b.isNaN(parseFloat(i.attr("data-min")))?0:parseFloat(i.attr("data-min")),g.max=b.isNaN(parseFloat(i.attr("data-max")))?10:parseFloat(i.attr("data-max")),g.value=i.attr("data-value")?i.attr("data-value").split(","):null;var j={background:"rgba(0, 0, 0, .25)",color:"#13b5b1",width:10,gutter:10,beginAngle:Math.PI/2,min:0,max:10,value:null};this.config=b.extend({},j,c);this._init()};e.prototype._init=function(){var b=this.hookWidth,c=this.hookHeight,e=Math.min(b,c),f=b===c?null:e===b?"height":e===c?"width":null,g=this.sizeAttr=e*d,h=document.createElement("canvas"),i=a(h);i.attr({width:g,height:g}),i.css({width:e,height:e}),null!=f&&("width"===f?i.css("margin-left",(b-c)/2+"px"):"height"===f&&i.css("margin-top",(c-b)/2+"px")),this.$hook.html(i),this.context=h.getContext("2d"),this.center=Math.floor(g/2),this._correctConfig(),this._drawBackground(),this._draw()},e.prototype._correctConfig=function(){var a,c=this.config,d=this.background=null!=c.background?c.background.toString():"rgba(0, 0, 0, .25)",e=this.color=null!=c.color?c.color.toString():"#13b5b1",f=this.width=b.isNaN(parseInt(c.width))?10:parseInt(c.width),g=this.gutter=b.isNaN(parseInt(c.gutter))?10:parseInt(c.gutter),h=this.beginAngle=b.isNaN(parseFloat(c.beginAngle))?Math.PI/2:parseFloat(c.beginAngle),i=this.min=b.isNaN(parseFloat(c.min))?0:parseFloat(c.min),j=this.max=b.isNaN(parseFloat(c.max))?10:parseFloat(c.max),k=this.circlesLength=b.isArray(c.circles)&&c.circles.length?c.circles.length:1;a=b.isArray(c.value)?this.value=b.map(c.value,function(a,c){return a=parseFloat(a),b.isNaN(a)?i:a},this):this.value=[b.isNaN(parseFloat(a))?i:parseFloat(a)];var l=a.length;if(k>l)for(var m=l;k>m;m++)a.push(i);var n=this.circles=Array(k);b.isArray(c.circles)||(c.circles=[]);for(var o=k;o--;)b.isObject(c.circles[o])||(c.circles[o]={}),n[o]={},null!=c.circles[o].background?n[o].background=c.circles[o].background.toString():n[o].background=d,null!=c.circles[o].color?n[o].color=c.circles[o].color.toString():n[o].color=e,null!=c.circles[o].width?n[o].width=b.isNaN(parseInt(c.circles[o].width))?f:parseInt(c.circles[o].width):n[o].width=f,null!=c.circles[o].gutter?n[o].gutter=b.isNaN(parseInt(c.circles[o].gutter))?g:parseInt(c.circles[o].gutter):n[o].gutter=g,null!=c.circles[o].beginAngle?n[o].beginAngle=b.isNaN(parseFloat(c.circles[o].beginAngle))?h:parseFloat(c.circles[o].beginAngle):n[o].beginAngle=h,null!=c.circles[o].min?n[o].min=b.isNaN(parseFloat(c.circles[o].min))?i:parseFloat(c.circles[o].min):n[o].min=i,null!=c.circles[o].max?n[o].max=b.isNaN(parseFloat(c.circles[o].max))?j:parseFloat(c.circles[o].max):n[o].max=j,null!=c.circles[o].value?(n[o].value=b.isNaN(parseFloat(c.circles[o].value))?a[o]:parseFloat(c.circles[o].value),a[o]=n[o].value):n[o].value=a[o]},e.prototype._drawBackground=function(){for(var a=this.circlesLength,b=this.context,c=this.circles,e=this.sizeAttr,f=this.center,g=0;a>g;g++){var h=c[g].width*d,i=c[g].gutter*d,j=e-2*h-2*i,k=j/2+h/2,l=c[g].background;b.beginPath(),b.arc(f,f,k,0,2*Math.PI,!1),b.lineWidth=h,b.strokeStyle=l,b.stroke(),b.closePath(),e=j}},e.prototype._draw=function(){for(var a,b=this.circlesLength,c=(this.context,this.circles),e=this.sizeAttr,f=this.center,g=0;b>g;g++){var h=c[g].width*d,i=c[g].gutter*d,j=e-2*h-2*i,k=j/2+h/2,l=c[g].color,m=c[g].beginAngle,n=c[g].value<c[g].min?c[g].min:c[g].value>c[g].max?c[g].max:c[g].value;a=(n-c[g].min)/(c[g].max-c[g].min)*Math.PI*2+c[g].beginAngle,this.context.beginPath(),this.context.arc(f,f,k,m,a,!1),this.context.lineWidth=h,this.context.strokeStyle=l,this.context.stroke(),this.context.closePath(),e=j}},e.prototype.show=function(){return this.$hook.show(),this},e.prototype.hide=function(){return this.$hook.hide(),this},e.prototype.getValue=function(){return this.value},e.prototype.update=function(b){return a.extend(this.config,b),this._init(),this},c.UI.addComponent("circle",e)}(b,c,d),function(a,b,c){var d='<div class="hi-range"></div>',e='<div class="hi-range-track"><div class="hi-range-tip"><div class="hi-range-tip-text">{minValue}</div><div class="hi-range-tip-trangle"></div></div>{singleRemove}<div class="hi-range-tip"><div class="hi-range-tip-text">{maxValue}</div><div class="hi-range-tip-trangle"></div></div><div class="hi-range-cover"></div><div class="hi-range-thumb"></div>{/singleRemove}<div class="hi-range-thumb"></div></div>',f=function(b){if(!(this instanceof f))return new f(b);b=b||{};var c=b.hook,d=this.$hook=a(c);if(!c||!d.length)return this;var e=d.data(),g={type:"double",min:0,max:100,minValue:0,maxValue:100,value:0,step:1,unit:"",disabled:!1,onStart:null,onChange:null,onFinish:null,onUpdate:null,startContext:this,changeContext:this,finishContext:this,updateContext:this};this.options=a.extend({},g,e,b),this.ele=d.get(0),this.$ele=d,this.$doc=a(document),this.$body=a("body"),this._init()};f.prototype._init=function(){var a=String(this.options.step).indexOf(".");this.stepToFixed=-1===a?0:String(this.options.step).substring(String(this.options.step).indexOf(".")+1).length,this.options.value=parseFloat(this.options.value).toFixed(this.stepToFixed),this.options.minValue=parseFloat(this.options.minValue).toFixed(this.stepToFixed),this.options.maxValue=parseFloat(this.options.maxValue).toFixed(this.stepToFixed),this.oldValue=this.options.value,this.oldMinValue=this.options.minValue,this.oldMaxValue=this.options.maxValue,this.value=this.oldValue,this.minValue=this.oldMinValue,this.maxValue=this.oldMaxValue,this._wrap(),this._position(),this.options.disabled?this.$range.addClass("hi-range-disabled"):this._bind()},f.prototype._wrap=function(){var a=this.options,b=this.$ele,c=e;if(this.$range&&(this._unbind(),this.$track.remove()),"double"===a.type)c=c.replace(/\{singleRemove\}/g,"").replace(/\{\/singleRemove\}/g,"").replace(/\{minValue\}/g,""+a.minValue+a.unit).replace(/\{maxValue\}/g,""+a.maxValue+a.unit);else{for(var f="{singleRemove}",g="{/singleRemove}",h=c.indexOf(f),i=c.indexOf(g);-1!==h;)c=c.substring(0,h)+c.substring(i+g.length),h=c.indexOf(f),i=c.indexOf(g);c=c.replace(/\{minValue\}/g,""+a.value+a.unit)}b.html(d);var j=b.find(".hi-range");j.html(c);var k=j.find(".hi-range-track"),l=k.find(".hi-range-tip"),m=k.find(".hi-range-cover"),n=k.find(".hi-range-thumb");this.$range=j,this.$track=k,this.$tips=l,this.$cover=m,this.$thumbs=n},f.prototype._position=function(){var a=this.$track.get(0).offsetWidth,b=this.$track.parent().parent(),c=[];if(a)a=this.$track.outerWidth();else{for(var d=0;1/0>d&&("none"===b.css("display")&&(b.css("visibility","hidden").show(),c.push(b)),-1===b.index(this.$body.get(0)));d++)b=b.parent();a=this.$track.outerWidth()}var e=this.options,f=this.$thumbs.outerWidth(),g=a-f,h=(e.max-e.min)/e.step,i=g/h;this.$thumbs.add(this.$tips).css({left:0,right:"auto"});var j=this.$tips.eq(0),k=j.outerWidth(),l=this.$thumbs.eq(0),m="double"===e.type?e.minValue:e.value,n=(m-e.min)*i/e.step,o=n+f/2-k/2;if(l.css("left",n+"px"),j.css("left",o+"px"),this.$firstTip=j,this.$firstThumb=l,"double"===e.type){var p=this.$tips.eq(1),q=p.outerWidth(),r=this.$thumbs.eq(1),s=(e.maxValue-e.min)*i/e.step,t=s+f/2-q/2,u=s-n,v=n+f/2;r.css("left",s+"px"),p.css("left",t+"px"),this.$cover.css({width:u+"px",left:v+"px"});var w=parseInt(j.css("left"),10),x=parseInt(p.css("left"),10),y=!(x-w-k>5);y&&(j.find(".hi-range-tip-text").text(""+e.minValue+e.unit+" - "+e.maxValue+e.unit),p.hide(),k=j.outerWidth(),o=n+f/2-k/2+(s-n)/2,j.css("left",o+"px"),e.minValue-e.min>e.maxValue-e.max?(l.css("z-index","2"),r.css("z-index","1")):(l.css("z-index","1"),r.css("z-index","2"))),this.$secondTip=p,this.$secondThumb=r}for(var z=c.length;z--;)c[z].css("visibility","").hide();this.partPixel=i},f.prototype._bind=function(){this.$thumbs.off("touchstart.range").on("touchstart.range",a.proxy(this._start,this))},f.prototype._unbind=function(){this.$thumbs.off("touchstart.range")},f.prototype._start=function(b){var c=b.currentTarget,d=a(c),e=this.options;this.thumbIndex=this.$thumbs.index(c);var f=this.thumbIndex?this.$secondTip:this.$firstTip,g=f.clone();if(f.stop(!0,!0),"double"===e.type&&(this.$tips.show().css("z-index","1"),this.$firstTip.find(".hi-range-tip-text").text(""+this.oldMinValue+e.unit),this.$secondTip.find(".hi-range-tip-text").text(""+this.oldMaxValue+e.unit),f.css("z-index","2"),this.thumbIndex)){var h=this.$firstTip.outerWidth(),i=parseInt(this.$firstThumb.css("left"),10)+this.$thumbs.outerWidth()/2-h/2;this.$firstTip.css("left",i+"px")}f.addClass("hi-range-tip-active"),g.addClass("hi-range-tip-active").css("display","none").find(".hi-range-tip-text").text(""+this.oldMinValue+e.unit),this.$body.append(g);var j=g.outerWidth(),k=parseInt(d.css("left"))+d.outerWidth()/2-j/2;f.animate({left:k+"px"},300,"linear"),g.remove(),g=null,this.$doc.on("touchmove.range",a.proxy(this._move,this)).on("touchend.range touchcancel.range",a.proxy(this._end,this)),a.isFunction(e.onStart)&&("double"===e.type?e.onStart.call(e.startContext,{minValue:Number(this.oldMinValue),maxValue:Number(this.oldMaxValue)}):e.onStart.call(e.startContext,{value:Number(this.oldValue)}))},f.prototype._move=function(a){a.preventDefault();var b=this.options,c=a.touches[0],d=this.thumbIndex?this.$secondThumb:this.$firstThumb,e=this.thumbIndex?this.$secondTip:this.$firstTip,f=c.pageX-this.$track.offset().left-parseFloat(this.$track.css("borderLeftWidth"))-d.outerWidth()/2,g=this.thumbIndex?parseInt(this.$firstThumb.css("left"),10):0,h="double"!==b.type||this.thumbIndex?this.$track.outerWidth()-this.$thumbs.outerWidth():parseInt(this.$secondThumb.css("left"),10);e.stop(!0,!0),f=g>f?g:f>h?h:f,d.css("left",f+"px");var i=Math.ceil(f/this.partPixel)*b.step+b.min,j=this.thumbIndex?this.oldMinValue:b.min,k=this.thumbIndex?b.max:"double"===b.type?this.oldMaxValue:b.max;i=Number(i),j=Number(j),k=Number(k),i=j>i?j:i>k?k:i,e.find(".hi-range-tip-text").text(""+i.toFixed(this.stepToFixed)+b.unit),"double"===b.type?this.thumbIndex?this.maxValue=i:this.minValue=i:this.value=i;var l=e.outerWidth(),m=f+d.outerWidth()/2-l/2;if(e.css("left",m+"px"),"double"===b.type){var n=parseInt(this.$firstThumb.css("left"),10),o=parseInt(this.$secondThumb.css("left"),10),p=o-n,q=n+d.outerWidth()/2;this.$cover.css({width:p+"px",left:q+"px"})}},f.prototype._end=function(b){var c=this.options,d=this.thumbIndex?this.$secondTip:this.$firstTip,e=this.thumbIndex?this.$secondThumb:this.$firstThumb;d.removeClass("hi-range-tip-active"),d.stop(!0,!0);var f=d.clone();f.removeClass("hi-range-tip-active").css("display","none"),this.$body.append(f);var g=f.outerWidth(),h=parseInt(e.css("left"))+e.outerWidth()/2-g/2;d.animate({left:h+"px"},300,"linear",a.proxy(function(){if("double"===c.type){var a=parseInt(this.$firstTip.css("left"),10),b=parseInt(this.$secondTip.css("left"),10),d=this.$firstTip.outerWidth(),f=!(b-a-d>5);if(f){this.$firstTip.find(".hi-range-tip-text").text(""+this.minValue+c.unit+" - "+this.maxValue+c.unit),this.$secondTip.fadeOut(300),d=this.$firstTip.outerWidth();var g=parseInt(this.$firstThumb.css("left"),10)+e.outerWidth()/2-d/2+(parseInt(this.$secondThumb.css("left"),10)-parseInt(this.$firstThumb.css("left"),10))/2;this.$firstTip.css("left",g+"px"),this.$thumbs.not(e[0]).css("z-index","1"),e.css("z-index","2")}}},this)),f.remove(),f=null,this.$doc.off(".range"),"double"===c.type?(a.isFunction(c.onChange)&&(this.minValue===this.oldMinValue&&this.maxValue===this.oldMaxValue||c.onChange.call(c.changeContext,{minValue:Number(this.minValue),maxValue:Number(this.maxValue)})),a.isFunction(c.onFinish)&&c.onFinish.call(c.finishContext,{minValue:Number(this.minValue),maxValue:Number(this.maxValue)}),this.oldMinValue=this.minValue,this.oldMaxValue=this.maxValue):(a.isFunction(c.onChange)&&this.value!==this.oldValue&&c.onChange.call(c.changeContext,{value:Number(this.value)}),a.isFunction(c.onFinish)&&c.onFinish.call(c.finishContext,{value:Number(this.value)}),this.oldValue=this.value)},f.prototype.getValue=function(){return"double"===this.options.type?{minValue:Number(this.minValue),maxValue:Number(this.maxValue)}:{value:Number(this.value)}},f.prototype.disable=function(){return this.$range.is(".hi-range-disabled")||this.$range.addClass("hi-range-disabled"),this.options.disabled=!0,this._unbind(),this},f.prototype.enable=function(){return this.$range.is(".hi-range-disabled")&&this.$range.removeClass("hi-range-disabled"),this.options.disabled=!1,this._bind(),this},f.prototype.update=function(b){return a.extend(this.options,b),this._init(),a.isFunction(this.options.onUpdate)&&this.options.onUpdate.call(this.options.updateContext,"double"===this.options.type?{minValue:Number(this.minValue),maxValue:Number(this.maxValue)}:{value:Number(this.value)}),this},c.UI.addComponent("range",f)}(b,c,d),d});